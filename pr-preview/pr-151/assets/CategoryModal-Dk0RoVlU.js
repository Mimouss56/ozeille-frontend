import{r as f,R as t,j as o}from"./iframe-Dn4w2i92.js";import{o as I,s as L,u as M}from"./schemas-uC1pUBOf.js";import{n as F}from"./coerce-BupZkCtC.js";import{u as P}from"./budgetsStore-_19baEpp.js";import{I as E}from"./InputField-DGLFEpVB.js";import{M as S}from"./Modal-CTaTw8jy.js";import{S as N}from"./Select-CfmwxV5v.js";var _=f.createContext({color:"currentColor",size:"1em",weight:"regular",mirrored:!1}),Z=function(i,l,a){var n=a.get(i);return n?n(l):(console.error('Unsupported icon weight. Choose from "thin", "light", "regular", "bold", "fill", or "duotone".'),null)};function j(e,i){if(e==null)return{};var l={},a=Object.keys(e),n,s;for(s=0;s<a.length;s++)n=a[s],!(i.indexOf(n)>=0)&&(l[n]=e[n]);return l}var C=f.forwardRef(function(e,i){var l=e.alt,a=e.color,n=e.size,s=e.weight,d=e.mirrored,p=e.children,c=e.renderPath,x=j(e,["alt","color","size","weight","mirrored","children","renderPath"]),h=f.useContext(_),k=h.color,y=k===void 0?"currentColor":k,r=h.size,m=h.weight,u=m===void 0?"regular":m,b=h.mirrored,w=b===void 0?!1:b,A=j(h,["color","size","weight","mirrored"]);return t.createElement("svg",Object.assign({ref:i,xmlns:"http://www.w3.org/2000/svg",width:n??r,height:n??r,fill:a??y,viewBox:"0 0 256 256",transform:d||w?"scale(-1, 1)":void 0},A,x),!!l&&t.createElement("title",null,l),p,t.createElement("rect",{width:"256",height:"256",fill:"none"}),c(s??u,a??y))});C.displayName="IconBase";var g=new Map;g.set("bold",function(e){return t.createElement(t.Fragment,null,t.createElement("line",{x1:"44",y1:"156",x2:"100",y2:"212",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),t.createElement("path",{d:"M92.7,216H48a8,8,0,0,1-8-8V163.3a7.9,7.9,0,0,1,2.3-5.6l120-120a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4l-120,120A7.9,7.9,0,0,1,92.7,216Z",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),t.createElement("line",{x1:"136",y1:"64",x2:"192",y2:"120",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),t.createElement("line",{x1:"164",y1:"92",x2:"72",y2:"184",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))});g.set("duotone",function(e){return t.createElement(t.Fragment,null,t.createElement("path",{d:"M192,120,136,64l26.3-26.3a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4Z",opacity:"0.2"}),t.createElement("path",{d:"M92.7,216H48a8,8,0,0,1-8-8V163.3a7.9,7.9,0,0,1,2.3-5.6l120-120a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4l-120,120A7.9,7.9,0,0,1,92.7,216Z",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),t.createElement("line",{x1:"136",y1:"64",x2:"192",y2:"120",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),t.createElement("line",{x1:"164",y1:"92",x2:"68",y2:"188",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),t.createElement("line",{x1:"95.5",y1:"215.5",x2:"40.5",y2:"160.5",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))});g.set("fill",function(){return t.createElement(t.Fragment,null,t.createElement("path",{d:"M224,76.7,179.3,32a15.9,15.9,0,0,0-22.6,0L130.3,58.3h0L36.7,152A15.9,15.9,0,0,0,32,163.3V208a16,16,0,0,0,16,16H92.7a15.9,15.9,0,0,0,11.3-4.7l120-120A16.1,16.1,0,0,0,224,76.7ZM51.3,160,144,67.3,160.7,84,68,176.7ZM48,179.3,76.7,208H48Zm48,25.4L79.3,188,172,95.3,188.7,112Z"}))});g.set("light",function(e){return t.createElement(t.Fragment,null,t.createElement("path",{d:"M92.7,216H48a8,8,0,0,1-8-8V163.3a7.9,7.9,0,0,1,2.3-5.6l120-120a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4l-120,120A7.9,7.9,0,0,1,92.7,216Z",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),t.createElement("line",{x1:"136",y1:"64",x2:"192",y2:"120",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),t.createElement("line",{x1:"164",y1:"92",x2:"68",y2:"188",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),t.createElement("line",{x1:"95.5",y1:"215.5",x2:"40.5",y2:"160.5",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))});g.set("thin",function(e){return t.createElement(t.Fragment,null,t.createElement("path",{d:"M92.7,216H48a8,8,0,0,1-8-8V163.3a7.9,7.9,0,0,1,2.3-5.6l120-120a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4l-120,120A7.9,7.9,0,0,1,92.7,216Z",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),t.createElement("line",{x1:"136",y1:"64",x2:"192",y2:"120",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),t.createElement("line",{x1:"164",y1:"92",x2:"68",y2:"188",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),t.createElement("line",{x1:"95.5",y1:"215.5",x2:"40.5",y2:"160.5",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))});g.set("regular",function(e){return t.createElement(t.Fragment,null,t.createElement("path",{d:"M92.7,216H48a8,8,0,0,1-8-8V163.3a7.9,7.9,0,0,1,2.3-5.6l120-120a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4l-120,120A7.9,7.9,0,0,1,92.7,216Z",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),t.createElement("line",{x1:"136",y1:"64",x2:"192",y2:"120",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),t.createElement("line",{x1:"164",y1:"92",x2:"68",y2:"188",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),t.createElement("line",{x1:"95.5",y1:"215.5",x2:"40.5",y2:"160.5",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))});var z=function(i,l){return Z(i,l,g)},W=f.forwardRef(function(e,i){return t.createElement(C,Object.assign({ref:i},e,{renderPath:z}))});W.displayName="Pencil";const B=I({label:L().min(1,"Le label est requis"),limitAmount:F({invalid_type_error:"Le montant doit être un nombre"}).optional(),budgetId:L().min(1,"Veuillez sélectionner un budget"),color:L().optional()}),v={label:"",budgetId:"",color:"#000000",limitAmount:0},H=({category:e})=>{const{createNewCategory:i,updateCurrentCategory:l}=M(),{budgets:a,fetchBudgets:n}=P(),s=a.map(r=>({label:r.label,value:r.id})),[d,p]=f.useState(v),[c,x]=f.useState({});f.useEffect(()=>{n()},[n]);const h=()=>{p(v),x({})},k=(r,m)=>{p(u=>({...u,[r]:m})),c[r]&&x(u=>({...u,[r]:void 0}))},y=async()=>{const r=B.safeParse(d);if(!r.success){const m={};return r.error.issues.forEach(u=>{u.path[0]&&(m[u.path[0]]=u.message)}),x(m),!1}try{return e?.id?await l(e.id,d):await i(d),h(),!0}catch{return!1}};return o.jsx(S,{title:e?.id?"Modifier la catégorie":"Nouvelle catégorie",actionLabel:e?.id?o.jsxs(o.Fragment,{children:[o.jsx(W,{size:16})," Éditer catégorie"]}):"Créer une nouvelle catégorie",confirmLabel:e?"Enregistrer":"Créer",cancelLabel:"Annuler",onConfirm:y,style:e?.id?"ghost":"primary",children:o.jsxs("form",{className:"flex flex-col gap-4 py-2",children:[o.jsx(E,{id:"category-label",name:"label",label:"Nom",value:d.label,onChange:r=>k("label",r),placeholder:"Ex: Alimentation",helperText:c.label,style:c.label?"error":"neutral"}),o.jsx(N,{id:"budgetId",label:"Budget associé",value:d.budgetId,onChange:r=>k("budgetId",r.target.value),options:s,placeholder:"Sélectionner un budget",helperText:c.budgetId,style:c.budgetId?"error":"neutral"}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"pt-1",children:o.jsx("input",{type:"color",className:"border-base-300 h-10 w-12 cursor-pointer rounded-lg border-2 p-1",value:d.color||"#000000",onChange:r=>k("color",r.target.value)})}),o.jsx("div",{className:"flex-1",children:o.jsx(E,{id:"category-limitAmount",name:"limitAmount",label:"Plafond (€)",type:"number",value:d.limitAmount?.toString(),onChange:r=>k("limitAmount",parseFloat(r)||0),placeholder:"0.00",helperText:c.limitAmount})})]})]})})};H.__docgenInfo={description:"",methods:[],displayName:"CategoryModal",props:{category:{required:!1,tsType:{name:"Category"},description:""}}};export{H as C,C as I,Z as r};
