import{r as f,j as r}from"./iframe-DL-MgNHw.js";import{o as y}from"./Pencil.es-CYzqNEQ1.js";import{o as B,s as b}from"./schemas-CpggPAYu.js";import{u as C}from"./budgetsStore-BdGhC539.js";import"./frequenciesStore-G6tgqEkl.js";import"./transactionsStore-B-xpDdp0.js";import{I as v}from"./InputField-BNeBtSJ0.js";import{M as w}from"./Modal-urHl-m3U.js";const S=B({label:b().min(1,"Le label est requis"),color:b().regex(/^#[0-9a-fA-F]{6}$/,{message:"Code couleur invalide. Doit contenir au moins 7 charactères (ex: #RRGGBB)."})}),E=S.extend({}),u={label:"",color:"#000000"},N=({budget:e})=>{const{updateCurrentBudget:h,createNewBudget:g}=C(),[o,n]=f.useState({label:e?.label?e.label:u.label,color:e?.color?e?.color:u.color}),[i,l]=f.useState({}),x=t=>c=>{n(s=>({...s,[t]:c})),i[t]&&l(s=>{const a={...s};return delete a[t],a})},d=()=>{n(u),l({})},m=async()=>{const t=E.safeParse(o);if(!t.success){const s={};return t.error.issues.forEach(a=>{a.path[0]&&(s[a.path[0]]=a.message)}),l(s),!1}const c={...o,label:o.label,color:o.color};try{return e?.id?await h(e.id,c):await g({...o}),d(),!0}catch(s){const a=s;for(const p of a.errors)l(j=>({...j,[p.property]:p.message}));return!1}};return r.jsx(w,{title:e?.id?"Éditer un budget":"Créer un nouveau budget",cancelLabel:"Annuler",actionLabel:e?.id?r.jsxs(r.Fragment,{children:[r.jsx(y,{size:16})," Éditer le budget"]}):"Créer un nouveau budget",style:e?.id?"ghost":"primary",onConfirm:m,onCancel:d,children:r.jsxs("form",{onSubmit:m,className:"flex justify-between gap-2 align-baseline md:gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsx(v,{id:"budget_label",name:"label",type:"text",label:"Nom du budget",placeholder:"Ex: Courses alimentaires",value:o.label,style:i.label?"error":"neutral",helperText:i.label,onChange:x("label")})}),r.jsx("div",{className:"rounded-circle h-10 w-10 overflow-hidden",children:r.jsx("input",{type:"color",className:"h-full w-full cursor-pointer rounded-full border-none",value:o.color,onChange:t=>n({...o,color:t.target.value})})})]})})};N.__docgenInfo={description:"",methods:[],displayName:"BudgetModal",props:{budget:{required:!1,tsType:{name:"Budget"},description:""}}};export{N as B};
