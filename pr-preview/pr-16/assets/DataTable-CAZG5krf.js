import{j as e,r as y}from"./iframe-IIuoEC8S.js";import{u as I,f as w,P as M,g as k,a as L}from"./Pagination-BcxAw_3h.js";import{I as q}from"./InputField-TPfIwvPA.js";import{S as _}from"./Select-ConrDtYY.js";const S=({value:u,onChange:i,placeholder:c="Rechercher...",label:o})=>e.jsx("div",{onClick:s=>s.stopPropagation(),onKeyDown:s=>s.stopPropagation(),role:"none",children:e.jsx(q,{id:`filter-input-${o.toLowerCase().replace(/\s+/g,"-")}`,name:`filter-${o}`,label:o,value:u,onChange:i,placeholder:c,size:"md",style:"neutral"})});S.__docgenInfo={description:"",methods:[],displayName:"FilterInput",props:{value:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Rechercher..."',computed:!1}},label:{required:!0,tsType:{name:"string"},description:""}}};const D=({value:u,onChange:i,options:c,label:o,emptyLabel:s="Toutes"})=>{const p=c.map(a=>({label:a.label,value:a.id}));return e.jsx("div",{onClick:a=>a.stopPropagation(),onKeyDown:a=>a.stopPropagation(),role:"none",children:e.jsx(_,{id:`filter-select-${o.toLowerCase().replace(/\s+/g,"-")}`,label:o,value:u,onChange:a=>i(a.target.value),options:p,placeholder:s,size:"xs",style:"neutral"})})};D.__docgenInfo={description:"",methods:[],displayName:"FilterSelect",props:{value:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"FilterSelectOption"}],raw:"FilterSelectOption[]"},description:""},label:{required:!0,tsType:{name:"string"},description:""},emptyLabel:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Toutes"',computed:!1}}}};const E=({data:u,columns:i,paginated:c,pageSize:o=10,totalPage:s,currentPage:p,setCurrentPage:a,isFiltering:d,filterElement:h})=>{const[v,R]=y.useState({pageIndex:0,pageSize:o}),[m,P]=y.useState({}),C=(t,n)=>{P(r=>({...r,[t]:n}))},F=y.useMemo(()=>u.filter(t=>Object.entries(m).every(([n,r])=>{if(!r||!i.find(f=>f.id===n||"accessorKey"in f&&f.accessorKey===n))return!0;const g=t[n];return g==null?!1:String(g).toLowerCase().includes(r.toLowerCase())})),[u,m,i]),O=y.useMemo(()=>i.map(t=>{if(!t.enableFiltering)return t;const r=t.id||"accessorKey"in t&&String(t.accessorKey)||"",l=t.options?.filterOptions,g=t.options?.filterPlaceholder||"Rechercher...",f=t.options?.filterEmptyLabel||"Toutes",T=t.header,j=typeof T=="string"?T:r;return{...t,header:()=>l&&l.length>0?e.jsx(D,{value:m[r]||"",onChange:x=>C(r,x),options:l,label:j,emptyLabel:f}):e.jsx(S,{value:m[r]||"",onChange:x=>C(r,x),label:j,placeholder:g})}}),[i,m]),A=()=>{if(c)return p??v},N=()=>s?{manualPagination:!0,pageCount:s}:{getPaginationRowModel:k()},b=I({data:F,columns:O,getCoreRowModel:L(),onPaginationChange:a??R,state:{pagination:A()},...N()});return u.length===0?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("p",{children:"Aucune donnÃ©e"})}):e.jsxs("div",{className:"grid grid-rows-[auto_1fr_auto] gap-4",children:[(d||h)&&e.jsx("div",{className:"flex items-end gap-3",children:h||(d?e.jsx(q,{id:"global-table-filter",name:"global-filter",label:"Recherche",type:"text",placeholder:typeof d=="object"&&d.placeholder?d.placeholder:"Rechercher...",size:"sm",disabled:!0}):null)}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"text-accent",children:b.getHeaderGroups().map(t=>e.jsx("tr",{children:t.headers.map(n=>{const l=n.column.columnDef.currency?"text-right":"";return e.jsx("th",{colSpan:n.colSpan,className:`border-neutral/20 ${l}`,children:w(n.column.columnDef.header,n.getContext())},n.id)})},t.id))}),e.jsx("tbody",{children:b.getRowModel().rows.map(t=>e.jsx("tr",{children:t.getVisibleCells().map(n=>{const l=n.column.columnDef.currency?"text-right":"";return e.jsx("td",{className:`border-neutral/10 ${l}`,children:w(n.column.columnDef.cell,n.getContext())},n.id)})},t.id))})]})}),c&&e.jsx("div",{className:"flex justify-center",children:e.jsx(M,{table:b,currentPage:p?p.pageIndex:v.pageIndex})})]})};E.__docgenInfo={description:"",methods:[],displayName:"DataTable",props:{data:{required:!0,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:""},columns:{required:!0,tsType:{name:"Array",elements:[{name:"intersection",raw:`ColumnDef<T, unknown> & {
  /** Active le filtrage automatique pour cette colonne */
  enableFiltering?: boolean;
  /** Options de filtrage */
  options?: FilterableColumnMeta;
  /** Aligne le contenu a droite. true = options par defaut (EUR) */
  currency?: boolean | CurrencyOptions;
}`,elements:[{name:"ColumnDef",elements:[{name:"T"},{name:"unknown"}],raw:"ColumnDef<T, unknown>"},{name:"signature",type:"object",raw:`{
  /** Active le filtrage automatique pour cette colonne */
  enableFiltering?: boolean;
  /** Options de filtrage */
  options?: FilterableColumnMeta;
  /** Aligne le contenu a droite. true = options par defaut (EUR) */
  currency?: boolean | CurrencyOptions;
}`,signature:{properties:[{key:"enableFiltering",value:{name:"boolean",required:!1},description:"Active le filtrage automatique pour cette colonne"},{key:"options",value:{name:"FilterableColumnMeta",required:!1},description:"Options de filtrage"},{key:"currency",value:{name:"union",raw:"boolean | CurrencyOptions",elements:[{name:"boolean"},{name:"CurrencyOptions"}],required:!1},description:"Aligne le contenu a droite. true = options par defaut (EUR)"}]}}]}],raw:"FilterableColumnDef<T>[]"},description:""},paginated:{required:!1,tsType:{name:"boolean"},description:""},pageSize:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"10",computed:!1}},placeholder:{required:!1,tsType:{name:"string"},description:""},totalPage:{required:!1,tsType:{name:"number"},description:""},currentPage:{required:!1,tsType:{name:"PaginationState"},description:""},setCurrentPage:{required:!1,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"PaginationState"}],raw:"SetStateAction<PaginationState>"}],raw:"Dispatch<SetStateAction<PaginationState>>"},description:""},isFiltering:{required:!1,tsType:{name:"union",raw:"boolean | { placeholder?: string }",elements:[{name:"boolean"},{name:"signature",type:"object",raw:"{ placeholder?: string }",signature:{properties:[{key:"placeholder",value:{name:"string",required:!1}}]}}]},description:"Enable filtering UI above the table (boolean or custom placeholder)"},filterElement:{required:!1,tsType:{name:"ReactNode"},description:"Custom filter element/component to display above the table"}}};export{E as D};
