import{j as e,r as w}from"./iframe-Wj2LhPGt.js";import{u as L,f as C,P as M,g as _,a as A}from"./Pagination-DzAMEi94.js";import{I as q}from"./InputField-bzG3qRsC.js";import{S as O}from"./Select-DWhgfQH2.js";const S=({value:l,onChange:c,placeholder:u="Rechercher...",label:i})=>e.jsx("div",{onClick:o=>o.stopPropagation(),onKeyDown:o=>o.stopPropagation(),role:"none",children:e.jsx(q,{id:`filter-input-${i.toLowerCase().replace(/\s+/g,"-")}`,name:`filter-${i}`,label:i,value:l,onChange:c,placeholder:u,size:"md",style:"neutral"})});S.__docgenInfo={description:"",methods:[],displayName:"FilterInput",props:{value:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Rechercher..."',computed:!1}},label:{required:!0,tsType:{name:"string"},description:""}}};const D=({value:l,onChange:c,options:u,label:i,emptyLabel:o="Toutes"})=>{const d=u.map(r=>({label:r.label,value:r.id}));return e.jsx("div",{onClick:r=>r.stopPropagation(),onKeyDown:r=>r.stopPropagation(),role:"none",children:e.jsx(O,{id:`filter-select-${i.toLowerCase().replace(/\s+/g,"-")}`,label:i,value:l,onChange:r=>c(r.target.value),options:d,placeholder:o,size:"xs",style:"neutral"})})};D.__docgenInfo={description:"",methods:[],displayName:"FilterSelect",props:{value:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"FilterSelectOption"}],raw:"FilterSelectOption[]"},description:""},label:{required:!0,tsType:{name:"string"},description:""},emptyLabel:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Toutes"',computed:!1}}}};const K=({data:l,columns:c,paginated:u,pageSize:i=10,totalPage:o,currentPage:d,setCurrentPage:r,isFiltering:p,filterElement:f})=>{const[x,P]=w.useState({pageIndex:0,pageSize:i}),[h,F]=w.useState({}),v=(t,n)=>{F(a=>({...a,[t]:n}))},R=l.filter(t=>Object.entries(h).every(([n,a])=>{if(!a||!c.find(g=>g.id===n||"accessorKey"in g&&g.accessorKey===n))return!0;const m=t[n];return m==null?!1:String(m).toLowerCase().includes(a.toLowerCase())})),N=c.map(t=>{if(!t.enableFiltering)return t;const a=t.id||"accessorKey"in t&&String(t.accessorKey)||"",s=t.options?.filterOptions,m=t.options?.filterPlaceholder||"Rechercher...",g=t.options?.filterEmptyLabel||"Toutes",T=t.header,j=typeof T=="string"?T:a;return{...t,header:()=>s&&s.length>0?e.jsx(D,{value:h[a]||"",onChange:b=>v(a,b),options:s,label:j,emptyLabel:g}):e.jsx(S,{value:h[a]||"",onChange:b=>v(a,b),label:j,placeholder:m})}}),I=()=>{if(u)return d??x},k=()=>o?{manualPagination:!0,pageCount:o}:{getPaginationRowModel:_()},y=L({data:R,columns:N,getCoreRowModel:A(),onPaginationChange:r??P,state:{pagination:I()},...k()});return l.length===0?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("p",{children:"Aucune donnÃ©e"})}):e.jsxs("div",{className:"grid grid-rows-[auto_1fr_auto] gap-4",children:[(p||f)&&e.jsx("div",{className:"flex items-end gap-3",children:f||(p?e.jsx(q,{id:"global-table-filter",name:"global-filter",label:"Recherche",type:"text",placeholder:typeof p=="object"&&p.placeholder?p.placeholder:"Rechercher...",size:"sm",disabled:!0}):null)}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"text-accent",children:y.getHeaderGroups().map(t=>e.jsx("tr",{children:t.headers.map(n=>{const s=n.column.columnDef.currency?"text-right":"";return e.jsx("th",{colSpan:n.colSpan,className:`border-neutral/20 ${s}`,children:C(n.column.columnDef.header,n.getContext())},n.id)})},t.id))}),e.jsx("tbody",{children:y.getRowModel().rows.map(t=>e.jsx("tr",{children:t.getVisibleCells().map(n=>{const s=n.column.columnDef.currency?"text-right":"";return e.jsx("td",{className:`border-neutral/10 ${s}`,children:C(n.column.columnDef.cell,n.getContext())},n.id)})},t.id))})]})}),u&&e.jsx("div",{className:"flex justify-center",children:e.jsx(M,{table:y,currentPage:d?d.pageIndex:x.pageIndex})})]})};K.__docgenInfo={description:"",methods:[],displayName:"DataTable",props:{data:{required:!0,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:"The data to display in the table"},columns:{required:!0,tsType:{name:"Array",elements:[{name:"intersection",raw:`ColumnDef<T, unknown> & {
  enableFiltering?: boolean;
  options?: FilterableColumnMeta;
  currency?: boolean;
}`,elements:[{name:"ColumnDef",elements:[{name:"T"},{name:"unknown"}],raw:"ColumnDef<T, unknown>"},{name:"signature",type:"object",raw:`{
  enableFiltering?: boolean;
  options?: FilterableColumnMeta;
  currency?: boolean;
}`,signature:{properties:[{key:"enableFiltering",value:{name:"boolean",required:!1}},{key:"options",value:{name:"FilterableColumnMeta",required:!1}},{key:"currency",value:{name:"boolean",required:!1}}]}}]}],raw:"FilterableColumnDef<T>[]"},description:"The columns to display in the table"},paginated:{required:!1,tsType:{name:"boolean"},description:""},pageSize:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"10",computed:!1}},placeholder:{required:!1,tsType:{name:"string"},description:"Placeholder text to display when there is no data"},totalPage:{required:!1,tsType:{name:"number"},description:""},currentPage:{required:!1,tsType:{name:"PaginationState"},description:""},setCurrentPage:{required:!1,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"PaginationState"}],raw:"SetStateAction<PaginationState>"}],raw:"Dispatch<SetStateAction<PaginationState>>"},description:""},isFiltering:{required:!1,tsType:{name:"union",raw:"boolean | { placeholder?: string }",elements:[{name:"boolean"},{name:"signature",type:"object",raw:"{ placeholder?: string }",signature:{properties:[{key:"placeholder",value:{name:"string",required:!1}}]}}]},description:"Enable filtering UI above the table (boolean or custom placeholder)"},filterElement:{required:!1,tsType:{name:"ReactNode"},description:"Custom filter element/component to display above the table"}}};export{K as D};
