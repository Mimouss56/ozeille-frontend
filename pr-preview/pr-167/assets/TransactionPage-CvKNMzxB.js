import{r as t,j as s}from"./iframe-C0DL0Vb_.js";import{D as f}from"./DataTable-Cp20Y_Ds.js";import{T as g}from"./TransactionModal-B7LSkGN6.js";import{u as p}from"./schemas-B6G9HTT6.js";import{u as h}from"./frequenciesStore-BCT4B5Z4.js";import{u as x}from"./transactionsStore-DNNvfgDY.js";import{A as T}from"./ActionMenu-rau5EM-c.js";import{T as y}from"./TransactionDeleteModal-C6bIBDII.js";function b(){const r=t.useCallback(e=>[{label:"Éditer",render:t.createElement(g,{transaction:e}),style:"outline"},{label:"Supprimer",render:t.createElement(y,{transaction:e}),style:"dangerOutline"}],[]);return{columns:t.useMemo(()=>[{accessorKey:"dueAt",header:"Date",cell:({row:e})=>new Date(e.original.dueAt).toLocaleDateString()},{accessorKey:"category",header:"Catégorie",cell:({row:e})=>e.original.category.label},{accessorKey:"amount",header:"Montant",cell:({row:e})=>`${e.original.amount} €`},{accessorKey:"label",header:"Libellé"},{id:"actions",header:"",cell:({row:e})=>t.createElement(T,{actions:r(e.original)})}],[r])}}const j=()=>{const{columns:r}=b(),a=10,[e,u]=t.useState({pageIndex:0,pageSize:a}),{fetchTransactions:o,meta:m,transactions:d}=x(),{fetchCategories:n,categories:c}=p(),{fetchFrequencies:l,frequencies:i}=h();return t.useEffect(()=>{o({limit:a,page:e.pageIndex+1})},[o,a,e.pageIndex]),t.useEffect(()=>{c.length===0&&n(),i.length===0&&l()},[c.length,n,l,i.length]),s.jsxs("div",{className:"flex h-full flex-col gap-4",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Transactions"}),s.jsx("div",{className:"flex justify-end gap-4",children:s.jsx(g,{})}),s.jsx(f,{pageSize:a,data:d,columns:r,currentPage:e,setCurrentPage:u,totalPage:m.totalPages,paginated:!0})]})};j.__docgenInfo={description:"",methods:[],displayName:"TransactionPage"};export{j as T};
