import{r as t,j as s}from"./iframe-DuKDR4_F.js";import{D as f}from"./DataTable-Co731hmo.js";import{T as u}from"./TransactionModal-BfPf20m0.js";import{u as p}from"./schemas-B8egPEsK.js";import{u as h}from"./frequenciesStore-CSJJxuXz.js";import{u as x}from"./transactionsStore-PY-W7mOQ.js";import{A as T}from"./ActionMenu-CkcIS61o.js";import{T as y}from"./TransactionDeleteModal-CrLrr8Cq.js";function b(){const r=t.useCallback(e=>[{label:"Éditer",render:t.createElement(u,{transaction:e}),style:"outline"},{label:"Supprimer",render:t.createElement(y,{transaction:e}),style:"dangerOutline"}],[]);return{columns:t.useMemo(()=>[{accessorKey:"dueAt",header:"Date",cell:({row:e})=>new Date(e.original.dueAt).toLocaleDateString()},{accessorKey:"category",header:"Catégorie",cell:({row:e})=>e.original.categoryId?`${e.original.category?.label}`:"Aucune catégorie"},{accessorKey:"amount",header:"Montant",cell:({row:e})=>`${e.original.amount} €`},{accessorKey:"label",header:"Libellé"},{id:"actions",header:"",cell:({row:e})=>t.createElement(T,{actions:r(e.original)})}],[r])}}const j=()=>{const{columns:r}=b(),a=10,[e,g]=t.useState({pageIndex:0,pageSize:a}),{fetchTransactions:n,meta:m,transactions:d}=x(),{fetchCategories:o,categories:c}=p(),{fetchFrequencies:i,frequencies:l}=h();return t.useEffect(()=>{n({limit:a,page:e.pageIndex+1})},[n,a,e.pageIndex]),t.useEffect(()=>{c.length===0&&o(),l.length===0&&i()},[c.length,o,i,l.length]),s.jsxs("div",{className:"flex h-full flex-col gap-4",children:[s.jsx("h1",{className:"text-neutral text-2xl font-bold",children:"Transactions"}),s.jsx("div",{className:"flex justify-end gap-4",children:s.jsx(u,{})}),s.jsx(f,{pageSize:a,data:d,columns:r,currentPage:e,setCurrentPage:g,totalPage:m.totalPages,paginated:!0})]})};j.__docgenInfo={description:"",methods:[],displayName:"TransactionPage"};export{j as T};
