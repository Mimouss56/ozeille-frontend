import{r as k,R as t,j as l}from"./iframe-gen-gUuQ.js";import{o as M,s as E,u as F,a as S}from"./schemas-DY4oFZHS.js";import{n as P}from"./coerce-BGLnOo1i.js";import{I as v}from"./InputField-tttOwZG9.js";import{M as N}from"./Modal-BmzGoSfc.js";import{S as Z}from"./Select-Ca4-LQp5.js";var _=k.createContext({color:"currentColor",size:"1em",weight:"regular",mirrored:!1}),z=function(a,s,d){var o=d.get(a);return o?o(s):(console.error('Unsupported icon weight. Choose from "thin", "light", "regular", "bold", "fill", or "duotone".'),null)};function C(e,a){if(e==null)return{};var s={},d=Object.keys(e),o,n;for(n=0;n<d.length;n++)o=d[n],!(a.indexOf(o)>=0)&&(s[o]=e[o]);return s}var W=k.forwardRef(function(e,a){var s=e.alt,d=e.color,o=e.size,n=e.weight,p=e.mirrored,c=e.children,g=e.renderPath,x=C(e,["alt","color","size","weight","mirrored","children","renderPath"]),m=k.useContext(_),L=m.color,r=L===void 0?"currentColor":L,u=m.size,i=m.weight,h=i===void 0?"regular":i,b=m.mirrored,A=b===void 0?!1:b,I=C(m,["color","size","weight","mirrored"]);return t.createElement("svg",Object.assign({ref:a,xmlns:"http://www.w3.org/2000/svg",width:o??u,height:o??u,fill:d??r,viewBox:"0 0 256 256",transform:p||A?"scale(-1, 1)":void 0},I,x),!!s&&t.createElement("title",null,s),c,t.createElement("rect",{width:"256",height:"256",fill:"none"}),g(n??h,d??r))});W.displayName="IconBase";var f=new Map;f.set("bold",function(e){return t.createElement(t.Fragment,null,t.createElement("line",{x1:"44",y1:"156",x2:"100",y2:"212",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),t.createElement("path",{d:"M92.7,216H48a8,8,0,0,1-8-8V163.3a7.9,7.9,0,0,1,2.3-5.6l120-120a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4l-120,120A7.9,7.9,0,0,1,92.7,216Z",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),t.createElement("line",{x1:"136",y1:"64",x2:"192",y2:"120",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),t.createElement("line",{x1:"164",y1:"92",x2:"72",y2:"184",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))});f.set("duotone",function(e){return t.createElement(t.Fragment,null,t.createElement("path",{d:"M192,120,136,64l26.3-26.3a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4Z",opacity:"0.2"}),t.createElement("path",{d:"M92.7,216H48a8,8,0,0,1-8-8V163.3a7.9,7.9,0,0,1,2.3-5.6l120-120a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4l-120,120A7.9,7.9,0,0,1,92.7,216Z",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),t.createElement("line",{x1:"136",y1:"64",x2:"192",y2:"120",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),t.createElement("line",{x1:"164",y1:"92",x2:"68",y2:"188",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),t.createElement("line",{x1:"95.5",y1:"215.5",x2:"40.5",y2:"160.5",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))});f.set("fill",function(){return t.createElement(t.Fragment,null,t.createElement("path",{d:"M224,76.7,179.3,32a15.9,15.9,0,0,0-22.6,0L130.3,58.3h0L36.7,152A15.9,15.9,0,0,0,32,163.3V208a16,16,0,0,0,16,16H92.7a15.9,15.9,0,0,0,11.3-4.7l120-120A16.1,16.1,0,0,0,224,76.7ZM51.3,160,144,67.3,160.7,84,68,176.7ZM48,179.3,76.7,208H48Zm48,25.4L79.3,188,172,95.3,188.7,112Z"}))});f.set("light",function(e){return t.createElement(t.Fragment,null,t.createElement("path",{d:"M92.7,216H48a8,8,0,0,1-8-8V163.3a7.9,7.9,0,0,1,2.3-5.6l120-120a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4l-120,120A7.9,7.9,0,0,1,92.7,216Z",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),t.createElement("line",{x1:"136",y1:"64",x2:"192",y2:"120",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),t.createElement("line",{x1:"164",y1:"92",x2:"68",y2:"188",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),t.createElement("line",{x1:"95.5",y1:"215.5",x2:"40.5",y2:"160.5",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))});f.set("thin",function(e){return t.createElement(t.Fragment,null,t.createElement("path",{d:"M92.7,216H48a8,8,0,0,1-8-8V163.3a7.9,7.9,0,0,1,2.3-5.6l120-120a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4l-120,120A7.9,7.9,0,0,1,92.7,216Z",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),t.createElement("line",{x1:"136",y1:"64",x2:"192",y2:"120",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),t.createElement("line",{x1:"164",y1:"92",x2:"68",y2:"188",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),t.createElement("line",{x1:"95.5",y1:"215.5",x2:"40.5",y2:"160.5",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))});f.set("regular",function(e){return t.createElement(t.Fragment,null,t.createElement("path",{d:"M92.7,216H48a8,8,0,0,1-8-8V163.3a7.9,7.9,0,0,1,2.3-5.6l120-120a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4l-120,120A7.9,7.9,0,0,1,92.7,216Z",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),t.createElement("line",{x1:"136",y1:"64",x2:"192",y2:"120",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),t.createElement("line",{x1:"164",y1:"92",x2:"68",y2:"188",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),t.createElement("line",{x1:"95.5",y1:"215.5",x2:"40.5",y2:"160.5",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))});var H=function(a,s){return z(a,s,f)},w=k.forwardRef(function(e,a){return t.createElement(W,Object.assign({ref:a},e,{renderPath:H}))});w.displayName="Pencil";const T=M({label:E().min(1,"Le label est requis"),limitAmount:P({invalid_type_error:"Le montant doit être un nombre"}),budgetId:E().min(1,"Veuillez sélectionner un budget"),color:E().optional()}),y={label:"",budgetId:"",color:"#000000",limitAmount:0},j=e=>({label:e?.id?e.label:y.label,limitAmount:e?.limitAmount??y.limitAmount,budgetId:e?.budgetId??y.budgetId,color:e?.color??y.color}),V=({category:e})=>{const{createNewCategory:a,updateCurrentCategory:s}=F(),{budgets:d}=S(),o=d.map(r=>({label:r.label,value:r.id})),[n,p]=k.useState(()=>j(e)),[c,g]=k.useState({});k.useEffect(()=>{p(j(e))},[e]);const x=(r,u)=>{p(i=>({...i,[r]:u})),c[r]&&g(i=>{const h={...i};return delete h[r],h})},m=()=>{j(e),g({})},L=async()=>{const r=T.safeParse(n);if(!r.success){const u={};return r.error.issues.forEach(i=>{i.path[0]&&(u[i.path[0]]=i.message)}),g(u),!1}try{return e?.id?await s(e.id,n):await a(n),m(),!0}catch(u){const i=u;for(const h of i.errors)g(b=>({...b,[h.property]:h.message}));return!1}};return l.jsx(N,{title:e?.id?"Modifier la catégorie":"Nouvelle catégorie",actionLabel:e?.id?l.jsxs(l.Fragment,{children:[l.jsx(w,{size:16})," Éditer catégorie"]}):"Créer une nouvelle catégorie",confirmLabel:e?"Enregistrer":"Créer",cancelLabel:"Annuler",onConfirm:L,style:e?.id?"ghost":"primary",children:l.jsxs("form",{className:"flex flex-col gap-4 py-2",children:[l.jsx(v,{id:"category-label",name:"label",label:"Nom",value:n.label,onChange:r=>x("label",r),placeholder:"Ex: Alimentation",helperText:c.label,style:c.label?"error":"neutral"}),l.jsx(Z,{id:"budgetId",label:"Budget associé",value:n.budgetId,onChange:r=>x("budgetId",r.target.value),options:o,placeholder:"Sélectionner un budget",helperText:c.budgetId,style:c.budgetId?"error":"neutral"}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("div",{className:"pt-1",children:l.jsx("input",{type:"color",className:"border-base-300 h-10 w-12 cursor-pointer rounded-lg border-2 p-1",value:n.color||"#000000",onChange:r=>x("color",r.target.value)})}),l.jsx("div",{className:"flex-1",children:l.jsx(v,{id:"category-limitAmount",name:"limitAmount",label:"Plafond (€)",type:"number",value:n.limitAmount.toString(),onChange:r=>x("limitAmount",parseFloat(r)||0),placeholder:"0.00",helperText:c.limitAmount})})]})]})})};V.__docgenInfo={description:"",methods:[],displayName:"CategoryModal",props:{category:{required:!1,tsType:{name:"Category"},description:""}}};export{V as C,W as I,z as r};
