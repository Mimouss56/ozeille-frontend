import{r as a,j as s}from"./iframe-gen-gUuQ.js";import{D as f}from"./DataTable-DdIBnpKD.js";import{T as g}from"./TransactionModal-BCQgV5QF.js";import{u as p}from"./schemas-DY4oFZHS.js";import{u as h}from"./frequenciesStore-HdtKM2Jk.js";import{u as x}from"./transactionsStore-DXjzqoRo.js";import{A as y}from"./ActionMenu-ClCedOAT.js";import{T}from"./TransactionDeleteModal-Nwbn0Dof.js";function b(){const r=a.useCallback(e=>[{label:"Éditer",render:a.createElement(g,{transaction:e}),style:"outline"},{label:"Supprimer",render:a.createElement(T,{transaction:e}),style:"dangerOutline"}],[]);return{columns:a.useMemo(()=>[{accessorKey:"dueAt",header:"Date",cell:({row:e})=>new Date(e.original.dueAt).toLocaleDateString()},{accessorKey:"category",header:"Catégorie",cell:({row:e})=>e.original.categoryId?`${e.original.category?.label}`:"Aucune catégorie"},{accessorKey:"amount",header:"Montant",cell:({row:e})=>`${e.original.amount} €`},{accessorKey:"label",header:"Libellé"},{id:"actions",header:"",cell:({row:e})=>a.createElement(y,{actions:r(e.original)})}],[r])}}const j=()=>{const{columns:r}=b(),t=10,[e,u]=a.useState({pageIndex:0,pageSize:t}),{fetchTransactions:o,meta:m,transactions:d}=x(),{fetchCategories:n,categories:c}=p(),{fetchFrequencies:i,frequencies:l}=h();return a.useEffect(()=>{o({limit:t,page:e.pageIndex+1})},[o,t,e.pageIndex]),a.useEffect(()=>{c.length===0&&n(),l.length===0&&i()},[c.length,n,i,l.length]),s.jsxs("div",{className:"flex h-full flex-col gap-4",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Transactions"}),s.jsx("div",{className:"flex justify-end gap-4",children:s.jsx(g,{})}),s.jsx(f,{pageSize:t,data:d,columns:r,currentPage:e,setCurrentPage:u,totalPage:m.totalPages,paginated:!0})]})};j.__docgenInfo={description:"",methods:[],displayName:"TransactionPage"};export{j as T};
