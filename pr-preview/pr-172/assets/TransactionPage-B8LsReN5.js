import{r as t,j as r}from"./iframe-B10ShIjv.js";import{D as f}from"./DataTable-DS28ola_.js";import{T as u}from"./TransactionModal-C2wVcm49.js";import{u as p}from"./schemas-YR227CNF.js";import{u as x}from"./frequenciesStore-CdWHvc19.js";import{u as h}from"./transactionsStore-Buxf9DMW.js";import{A as y}from"./ActionMenu-BShjyCzW.js";import{T}from"./TransactionDeleteModal-BnHXtC5r.js";function b(){const n=t.useCallback(e=>[{label:"Éditer",render:t.createElement(u,{transaction:e}),style:"outline"},{label:"Supprimer",render:t.createElement(T,{transaction:e}),style:"dangerOutline"}],[]);return{columns:t.useMemo(()=>[{accessorKey:"dueAt",header:"Date",cell:({row:e})=>new Date(e.original.dueAt).toLocaleDateString()},{accessorKey:"category",header:"Catégorie",cell:({row:e})=>e.original.category.label},{accessorKey:"amount",header:"Montant",cell:({row:e})=>{const o=Number(e.original.amount).toFixed(2),s=e.original.category.type==="INCOME";return t.createElement("span",{className:`font-medium ${s?"text-green-600":"text-red-600"}`},`${s?"+":""} ${o} €`)}},{accessorKey:"label",header:"Libellé"},{id:"actions",header:"",cell:({row:e})=>t.createElement(y,{actions:n(e.original)})}],[n])}}const E=()=>{const{columns:n}=b(),a=10,[e,o]=t.useState({pageIndex:0,pageSize:a}),{fetchTransactions:s,meta:g,transactions:d}=h(),{fetchCategories:c,categories:i}=p(),{fetchFrequencies:l,frequencies:m}=x();return t.useEffect(()=>{s({limit:a,page:e.pageIndex+1})},[s,a,e.pageIndex]),t.useEffect(()=>{i.length===0&&c(),m.length===0&&l()},[i.length,c,l,m.length]),r.jsxs("div",{className:"flex h-full flex-col gap-4",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Transactions"}),r.jsx("div",{className:"flex justify-end gap-4",children:r.jsx(u,{})}),r.jsx(f,{pageSize:a,data:d,columns:n,currentPage:e,setCurrentPage:o,totalPage:g.totalPages,paginated:!0})]})};E.__docgenInfo={description:"",methods:[],displayName:"TransactionPage"};export{E as T};
