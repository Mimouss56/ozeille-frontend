import{r as t,j as r}from"./iframe-D3GX8_4k.js";import{D as f}from"./DataTable-BOcis9Ic.js";import{T as g}from"./TransactionModal--hpX__e2.js";import{u as p}from"./schemas-DE_wHYVB.js";import{u as x}from"./frequenciesStore-CDz6dryQ.js";import{u as h}from"./transactionsStore-EhRNWia7.js";import{A as y}from"./ActionMenu-qD8OsUDE.js";import{T}from"./TransactionDeleteModal-GzeM_8ME.js";function b(){const s=t.useCallback(e=>[{label:"Éditer",render:t.createElement(g,{transaction:e}),style:"outline"},{label:"Supprimer",render:t.createElement(T,{transaction:e}),style:"dangerOutline"}],[]);return{columns:t.useMemo(()=>[{accessorKey:"dueAt",header:"Date",cell:({row:e})=>new Date(e.original.dueAt).toLocaleDateString()},{accessorKey:"category",header:"Catégorie",cell:({row:e})=>e.original.categoryId?`${e.original.category?.label}`:"Aucune catégorie"},{accessorKey:"amount",header:"Montant",cell:({row:e})=>{const o=Number(e.original.amount).toFixed(2),n=e.original.category.type==="INCOME";return t.createElement("span",{className:`font-medium ${n?"text-green-600":"text-red-600"}`},`${n?"+":""} ${o} €`)}},{accessorKey:"label",header:"Libellé"},{id:"actions",header:"",cell:({row:e})=>t.createElement(y,{actions:s(e.original)})}],[s])}}const E=()=>{const{columns:s}=b(),a=10,[e,o]=t.useState({pageIndex:0,pageSize:a}),{fetchTransactions:n,meta:m,transactions:d}=h(),{fetchCategories:c,categories:i}=p(),{fetchFrequencies:l,frequencies:u}=x();return t.useEffect(()=>{n({limit:a,page:e.pageIndex+1})},[n,a,e.pageIndex]),t.useEffect(()=>{i.length===0&&c(),u.length===0&&l()},[i.length,c,l,u.length]),r.jsxs("div",{className:"flex h-full flex-col gap-4",children:[r.jsx("h1",{className:"text-neutral text-2xl font-bold",children:"Transactions"}),r.jsx("div",{className:"flex justify-end gap-4",children:r.jsx(g,{})}),r.jsx(f,{pageSize:a,data:d,columns:s,currentPage:e,setCurrentPage:o,totalPage:m.totalPages,paginated:!0})]})};E.__docgenInfo={description:"",methods:[],displayName:"TransactionPage"};export{E as T};
