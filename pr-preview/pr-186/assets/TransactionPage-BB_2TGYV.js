import{r as t,j as a}from"./iframe-DUmvcQcf.js";import{o as p}from"./Wallet.es-DoqAQdjg.js";import{E as f}from"./EmptyCard-BVHb9BoZ.js";import{D as x}from"./DataTable-DMPK8FLQ.js";import{T as g}from"./TransactionModal-B2Q6QUcQ.js";import{u as h}from"./schemas-BJrmLcbl.js";import{u as y}from"./frequenciesStore-CWLwV7p5.js";import{u as T}from"./transactionsStore-D9KDWvWm.js";import{A as b}from"./ActionMenu-D86Yy6eD.js";import{T as E}from"./TransactionDeleteModal-BfmXP6T5.js";function j(){const o=t.useCallback(e=>[{label:"Éditer",render:t.createElement(g,{transaction:e}),style:"outline"},{label:"Supprimer",render:t.createElement(E,{transaction:e}),style:"dangerOutline"}],[]);return{columns:t.useMemo(()=>[{accessorKey:"dueAt",header:"Date",cell:({row:e})=>new Date(e.original.dueAt).toLocaleDateString()},{accessorKey:"category",header:"Catégorie",cell:({row:e})=>e.original.categoryId?`${e.original.category?.label}`:"Aucune catégorie"},{accessorKey:"amount",header:"Montant",cell:({row:e})=>{const s=Number(e.original.amount).toFixed(2),r=e.original.category?.type==="INCOME";return t.createElement("span",{className:`font-medium ${r?"text-green-600":"text-red-600"}`},`${r?"+":""} ${s} €`)}},{accessorKey:"label",header:"Libellé"},{id:"actions",header:"",cell:({row:e})=>t.createElement(b,{actions:o(e.original)})}],[o])}}const A=()=>{const{columns:o}=j(),n=10,[e,s]=t.useState({pageIndex:0,pageSize:n}),{fetchTransactions:r,meta:d,transactions:c}=T(),{fetchCategories:i,categories:l}=h(),{fetchFrequencies:u,frequencies:m}=y();return t.useEffect(()=>{r({limit:n,page:e.pageIndex+1})},[r,n,e.pageIndex]),t.useEffect(()=>{l.length===0&&i(),m.length===0&&u()},[l.length,i,u,m.length]),a.jsxs("div",{className:"flex h-full flex-col gap-4",children:[a.jsx("h1",{className:"text-neutral text-2xl font-bold",children:"Transactions"}),a.jsx("div",{className:"flex justify-end gap-4",children:a.jsx(g,{})}),c.length===0&&a.jsx(f,{icon:p,label:"Aucune transaction",subtitle:"Ajouter une nouvelle transaction"}),a.jsx(x,{pageSize:n,data:c,columns:o,currentPage:e,setCurrentPage:s,totalPage:d.totalPages,paginated:!0})]})};A.__docgenInfo={description:"",methods:[],displayName:"TransactionPage"};export{A as T};
