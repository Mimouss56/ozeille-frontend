import{r as o,g as ae,j as m}from"./iframe-q9bkF4y7.js";import{p as ne}from"./IconBase.es-BZOO5h6-.js";import{B as se}from"./BudgetCard-DK-R6Bul.js";import{B as ie}from"./BudgetModal-DzkYORkJ.js";import{I as ue}from"./IncomeCard-DierfCz6.js";import{I as Q}from"./InputField-DLp2LqOA.js";import{S as oe}from"./StatusMessage-BRDh3mV2.js";import{a as ce}from"./schemas-B5ScU8xd.js";const le=new Map([["bold",o.createElement(o.Fragment,null,o.createElement("path",{d:"M140,32V64a12,12,0,0,1-24,0V32a12,12,0,0,1,24,0Zm33.25,62.75a12,12,0,0,0,8.49-3.52L204.37,68.6a12,12,0,0,0-17-17L164.77,74.26a12,12,0,0,0,8.48,20.49ZM224,116H192a12,12,0,0,0,0,24h32a12,12,0,0,0,0-24Zm-42.26,48.77a12,12,0,1,0-17,17l22.63,22.63a12,12,0,0,0,17-17ZM128,180a12,12,0,0,0-12,12v32a12,12,0,0,0,24,0V192A12,12,0,0,0,128,180ZM74.26,164.77,51.63,187.4a12,12,0,0,0,17,17l22.63-22.63a12,12,0,1,0-17-17ZM76,128a12,12,0,0,0-12-12H32a12,12,0,0,0,0,24H64A12,12,0,0,0,76,128ZM68.6,51.63a12,12,0,1,0-17,17L74.26,91.23a12,12,0,0,0,17-17Z"}))],["duotone",o.createElement(o.Fragment,null,o.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),o.createElement("path",{d:"M136,32V64a8,8,0,0,1-16,0V32a8,8,0,0,1,16,0Zm37.25,58.75a8,8,0,0,0,5.66-2.35l22.63-22.62a8,8,0,0,0-11.32-11.32L167.6,77.09a8,8,0,0,0,5.65,13.66ZM224,120H192a8,8,0,0,0,0,16h32a8,8,0,0,0,0-16Zm-45.09,47.6a8,8,0,0,0-11.31,11.31l22.62,22.63a8,8,0,0,0,11.32-11.32ZM128,184a8,8,0,0,0-8,8v32a8,8,0,0,0,16,0V192A8,8,0,0,0,128,184ZM77.09,167.6,54.46,190.22a8,8,0,0,0,11.32,11.32L88.4,178.91A8,8,0,0,0,77.09,167.6ZM72,128a8,8,0,0,0-8-8H32a8,8,0,0,0,0,16H64A8,8,0,0,0,72,128ZM65.78,54.46A8,8,0,0,0,54.46,65.78L77.09,88.4A8,8,0,0,0,88.4,77.09Z"}))],["fill",o.createElement(o.Fragment,null,o.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm33.94,58.75,17-17a8,8,0,0,1,11.32,11.32l-17,17a8,8,0,0,1-11.31-11.31ZM48,136a8,8,0,0,1,0-16H72a8,8,0,0,1,0,16Zm46.06,37.25-17,17a8,8,0,0,1-11.32-11.32l17-17a8,8,0,0,1,11.31,11.31Zm0-79.19a8,8,0,0,1-11.31,0l-17-17A8,8,0,0,1,77.09,65.77l17,17A8,8,0,0,1,94.06,94.06ZM136,208a8,8,0,0,1-16,0V184a8,8,0,0,1,16,0Zm0-136a8,8,0,0,1-16,0V48a8,8,0,0,1,16,0Zm54.23,118.23a8,8,0,0,1-11.32,0l-17-17a8,8,0,0,1,11.31-11.31l17,17A8,8,0,0,1,190.23,190.23ZM208,136H184a8,8,0,0,1,0-16h24a8,8,0,0,1,0,16Z"}))],["light",o.createElement(o.Fragment,null,o.createElement("path",{d:"M134,32V64a6,6,0,0,1-12,0V32a6,6,0,0,1,12,0Zm39.25,56.75A6,6,0,0,0,177.5,87l22.62-22.63a6,6,0,0,0-8.48-8.48L169,78.5a6,6,0,0,0,4.24,10.25ZM224,122H192a6,6,0,0,0,0,12h32a6,6,0,0,0,0-12Zm-46.5,47A6,6,0,0,0,169,177.5l22.63,22.62a6,6,0,0,0,8.48-8.48ZM128,186a6,6,0,0,0-6,6v32a6,6,0,0,0,12,0V192A6,6,0,0,0,128,186ZM78.5,169,55.88,191.64a6,6,0,1,0,8.48,8.48L87,177.5A6,6,0,1,0,78.5,169ZM70,128a6,6,0,0,0-6-6H32a6,6,0,0,0,0,12H64A6,6,0,0,0,70,128ZM64.36,55.88a6,6,0,0,0-8.48,8.48L78.5,87A6,6,0,1,0,87,78.5Z"}))],["regular",o.createElement(o.Fragment,null,o.createElement("path",{d:"M136,32V64a8,8,0,0,1-16,0V32a8,8,0,0,1,16,0Zm37.25,58.75a8,8,0,0,0,5.66-2.35l22.63-22.62a8,8,0,0,0-11.32-11.32L167.6,77.09a8,8,0,0,0,5.65,13.66ZM224,120H192a8,8,0,0,0,0,16h32a8,8,0,0,0,0-16Zm-45.09,47.6a8,8,0,0,0-11.31,11.31l22.62,22.63a8,8,0,0,0,11.32-11.32ZM128,184a8,8,0,0,0-8,8v32a8,8,0,0,0,16,0V192A8,8,0,0,0,128,184ZM77.09,167.6,54.46,190.22a8,8,0,0,0,11.32,11.32L88.4,178.91A8,8,0,0,0,77.09,167.6ZM72,128a8,8,0,0,0-8-8H32a8,8,0,0,0,0,16H64A8,8,0,0,0,72,128ZM65.78,54.46A8,8,0,0,0,54.46,65.78L77.09,88.4A8,8,0,0,0,88.4,77.09Z"}))],["thin",o.createElement(o.Fragment,null,o.createElement("path",{d:"M132,32V64a4,4,0,0,1-8,0V32a4,4,0,0,1,8,0Zm41.25,54.75a4,4,0,0,0,2.83-1.18L198.71,63a4,4,0,0,0-5.66-5.66L170.43,79.92a4,4,0,0,0,2.82,6.83ZM224,124H192a4,4,0,0,0,0,8h32a4,4,0,0,0,0-8Zm-47.92,46.43a4,4,0,1,0-5.65,5.65l22.62,22.63a4,4,0,0,0,5.66-5.66ZM128,188a4,4,0,0,0-4,4v32a4,4,0,0,0,8,0V192A4,4,0,0,0,128,188ZM79.92,170.43,57.29,193.05A4,4,0,0,0,63,198.71l22.62-22.63a4,4,0,1,0-5.65-5.65ZM68,128a4,4,0,0,0-4-4H32a4,4,0,0,0,0,8H64A4,4,0,0,0,68,128ZM63,57.29A4,4,0,0,0,57.29,63L79.92,85.57a4,4,0,1,0,5.65-5.65Z"}))]]),K=o.forwardRef((Z,L)=>o.createElement(ne,{ref:L,...Z,weights:le}));K.displayName="SpinnerIcon";var P={exports:{}},fe=P.exports,G;function de(){return G||(G=1,(function(Z,L){(function(y,S){Z.exports=S()})(fe,(function(){var y=1e3,S=6e4,C=36e5,w="millisecond",g="second",x="minute",j="hour",D="day",V="week",c="month",A="quarter",p="year",Y="date",J="Invalid Date",X=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ee=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,te={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var r=["th","st","nd","rd"],e=n%100;return"["+n+(r[(e-20)%10]||r[e]||r[0])+"]"}},W=function(n,r,e){var a=String(n);return!a||a.length>=r?n:""+Array(r+1-a.length).join(e)+n},re={s:W,z:function(n){var r=-n.utcOffset(),e=Math.abs(r),a=Math.floor(e/60),t=e%60;return(r<=0?"+":"-")+W(a,2,"0")+":"+W(t,2,"0")},m:function n(r,e){if(r.date()<e.date())return-n(e,r);var a=12*(e.year()-r.year())+(e.month()-r.month()),t=r.clone().add(a,c),s=e-t<0,i=r.clone().add(a+(s?-1:1),c);return+(-(a+(e-t)/(s?t-i:i-t))||0)},a:function(n){return n<0?Math.ceil(n)||0:Math.floor(n)},p:function(n){return{M:c,y:p,w:V,d:D,D:Y,h:j,m:x,s:g,ms:w,Q:A}[n]||String(n||"").toLowerCase().replace(/s$/,"")},u:function(n){return n===void 0}},N="en",H={};H[N]=te;var R="$isDayjsObject",U=function(n){return n instanceof F||!(!n||!n[R])},I=function n(r,e,a){var t;if(!r)return N;if(typeof r=="string"){var s=r.toLowerCase();H[s]&&(t=s),e&&(H[s]=e,t=s);var i=r.split("-");if(!t&&i.length>1)return n(i[0])}else{var l=r.name;H[l]=r,t=l}return!a&&t&&(N=t),t||!a&&N},d=function(n,r){if(U(n))return n.clone();var e=typeof r=="object"?r:{};return e.date=n,e.args=arguments,new F(e)},u=re;u.l=I,u.i=U,u.w=function(n,r){return d(n,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var F=(function(){function n(e){this.$L=I(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[R]=!0}var r=n.prototype;return r.parse=function(e){this.$d=(function(a){var t=a.date,s=a.utc;if(t===null)return new Date(NaN);if(u.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var i=t.match(X);if(i){var l=i[2]-1||0,f=(i[7]||"0").substring(0,3);return s?new Date(Date.UTC(i[1],l,i[3]||1,i[4]||0,i[5]||0,i[6]||0,f)):new Date(i[1],l,i[3]||1,i[4]||0,i[5]||0,i[6]||0,f)}}return new Date(t)})(e),this.init()},r.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},r.$utils=function(){return u},r.isValid=function(){return this.$d.toString()!==J},r.isSame=function(e,a){var t=d(e);return this.startOf(a)<=t&&t<=this.endOf(a)},r.isAfter=function(e,a){return d(e)<this.startOf(a)},r.isBefore=function(e,a){return this.endOf(a)<d(e)},r.$g=function(e,a,t){return u.u(e)?this[a]:this.set(t,e)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(e,a){var t=this,s=!!u.u(a)||a,i=u.p(e),l=function(_,$){var b=u.w(t.$u?Date.UTC(t.$y,$,_):new Date(t.$y,$,_),t);return s?b:b.endOf(D)},f=function(_,$){return u.w(t.toDate()[_].apply(t.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice($)),t)},h=this.$W,M=this.$M,v=this.$D,E="set"+(this.$u?"UTC":"");switch(i){case p:return s?l(1,0):l(31,11);case c:return s?l(1,M):l(0,M+1);case V:var O=this.$locale().weekStart||0,k=(h<O?h+7:h)-O;return l(s?v-k:v+(6-k),M);case D:case Y:return f(E+"Hours",0);case j:return f(E+"Minutes",1);case x:return f(E+"Seconds",2);case g:return f(E+"Milliseconds",3);default:return this.clone()}},r.endOf=function(e){return this.startOf(e,!1)},r.$set=function(e,a){var t,s=u.p(e),i="set"+(this.$u?"UTC":""),l=(t={},t[D]=i+"Date",t[Y]=i+"Date",t[c]=i+"Month",t[p]=i+"FullYear",t[j]=i+"Hours",t[x]=i+"Minutes",t[g]=i+"Seconds",t[w]=i+"Milliseconds",t)[s],f=s===D?this.$D+(a-this.$W):a;if(s===c||s===p){var h=this.clone().set(Y,1);h.$d[l](f),h.init(),this.$d=h.set(Y,Math.min(this.$D,h.daysInMonth())).$d}else l&&this.$d[l](f);return this.init(),this},r.set=function(e,a){return this.clone().$set(e,a)},r.get=function(e){return this[u.p(e)]()},r.add=function(e,a){var t,s=this;e=Number(e);var i=u.p(a),l=function(M){var v=d(s);return u.w(v.date(v.date()+Math.round(M*e)),s)};if(i===c)return this.set(c,this.$M+e);if(i===p)return this.set(p,this.$y+e);if(i===D)return l(1);if(i===V)return l(7);var f=(t={},t[x]=S,t[j]=C,t[g]=y,t)[i]||1,h=this.$d.getTime()+e*f;return u.w(h,this)},r.subtract=function(e,a){return this.add(-1*e,a)},r.format=function(e){var a=this,t=this.$locale();if(!this.isValid())return t.invalidDate||J;var s=e||"YYYY-MM-DDTHH:mm:ssZ",i=u.z(this),l=this.$H,f=this.$m,h=this.$M,M=t.weekdays,v=t.months,E=t.meridiem,O=function($,b,B,T){return $&&($[b]||$(a,s))||B[b].slice(0,T)},k=function($){return u.s(l%12||12,$,"0")},_=E||function($,b,B){var T=$<12?"AM":"PM";return B?T.toLowerCase():T};return s.replace(ee,(function($,b){return b||(function(B){switch(B){case"YY":return String(a.$y).slice(-2);case"YYYY":return u.s(a.$y,4,"0");case"M":return h+1;case"MM":return u.s(h+1,2,"0");case"MMM":return O(t.monthsShort,h,v,3);case"MMMM":return O(v,h);case"D":return a.$D;case"DD":return u.s(a.$D,2,"0");case"d":return String(a.$W);case"dd":return O(t.weekdaysMin,a.$W,M,2);case"ddd":return O(t.weekdaysShort,a.$W,M,3);case"dddd":return M[a.$W];case"H":return String(l);case"HH":return u.s(l,2,"0");case"h":return k(1);case"hh":return k(2);case"a":return _(l,f,!0);case"A":return _(l,f,!1);case"m":return String(f);case"mm":return u.s(f,2,"0");case"s":return String(a.$s);case"ss":return u.s(a.$s,2,"0");case"SSS":return u.s(a.$ms,3,"0");case"Z":return i}return null})($)||i.replace(":","")}))},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(e,a,t){var s,i=this,l=u.p(a),f=d(e),h=(f.utcOffset()-this.utcOffset())*S,M=this-f,v=function(){return u.m(i,f)};switch(l){case p:s=v()/12;break;case c:s=v();break;case A:s=v()/3;break;case V:s=(M-h)/6048e5;break;case D:s=(M-h)/864e5;break;case j:s=M/C;break;case x:s=M/S;break;case g:s=M/y;break;default:s=M}return t?s:u.a(s)},r.daysInMonth=function(){return this.endOf(c).$D},r.$locale=function(){return H[this.$L]},r.locale=function(e,a){if(!e)return this.$L;var t=this.clone(),s=I(e,a,!0);return s&&(t.$L=s),t},r.clone=function(){return u.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},n})(),q=F.prototype;return d.prototype=q,[["$ms",w],["$s",g],["$m",x],["$H",j],["$W",D],["$M",c],["$y",p],["$D",Y]].forEach((function(n){q[n[1]]=function(r){return this.$g(r,n[0],n[1])}})),d.extend=function(n,r){return n.$i||(n(r,F,d),n.$i=!0),d},d.locale=I,d.isDayjs=U,d.unix=function(n){return d(1e3*n)},d.en=H[N],d.Ls=H,d.p={},d}))})(P)),P.exports}var he=de();const z=ae(he),me=()=>z().startOf("month").format("YYYY-MM");function Me(){const[Z,L]=o.useState(""),[y,S]=o.useState(()=>me()),{loading:C,fetchBudgets:w,budgets:g}=ce();o.useEffect(()=>{const c={},A=z(y,"YYYY-MM").startOf("month").format("YYYY-MM-DD"),p=z(y,"YYYY-MM").endOf("month").format("YYYY-MM-DD");c.from=A,c.to=p,w(c)},[w,y]);const x=o.useMemo(()=>{const c=g.filter(A=>{const p=A.categories??[];return p.length===0?!0:p.some(Y=>Y.type!=="INCOME")});return Z.trim()?c.filter(A=>A.label.toLowerCase().includes(Z.toLowerCase())):c},[g,Z]),j=o.useMemo(()=>g?g.flatMap(c=>c.categories??[]).filter(c=>c.type==="INCOME"):[],[g]),D=o.useCallback(c=>{L(c)},[]),V=o.useCallback(c=>{S(c)},[]);return{searchValue:Z,period:y,filteredBudgets:x,incomeCategories:j,loading:C,handleChange:D,handlePeriodChange:V}}function ge(){const{searchValue:Z,period:L,filteredBudgets:y,incomeCategories:S,loading:C,handleChange:w,handlePeriodChange:g}=Me();return C?m.jsx("div",{className:"flex h-64 items-center justify-center",children:m.jsx("div",{className:"animate-spin",children:m.jsx(K,{size:32})})}):m.jsxs("div",{className:"flex h-full flex-col gap-4",children:[m.jsx("h1",{className:"text-neutral text-2xl font-bold",children:"Budgets"}),m.jsx("div",{className:"flex justify-end gap-4",children:m.jsx(ie,{})}),m.jsxs("div",{className:"mt-8 flex flex-col gap-y-4 sm:flex-row sm:justify-between sm:gap-y-0",children:[m.jsx("div",{className:"sm:w-1/3",children:m.jsx(Q,{id:"search-budget",label:"",name:"search-budget",placeholder:"Rechercher...",value:Z,onChange:w})}),m.jsx(Q,{id:"from-date",label:"Période",type:"month",name:"period-date",value:L,placeholder:"Période",onChange:g})]}),m.jsx("section",{className:"mt-4 flex w-full flex-col gap-4 lg:justify-center",children:m.jsx(ue,{categories:S})}),m.jsx("section",{className:"flex flex-col gap-4",children:y.length===0?m.jsx(oe,{variant:"default",children:"Aucun budget à afficher pour le moment"}):m.jsx("div",{className:"mt-4 grid w-full grid-cols-1 gap-6 lg:grid-cols-2 lg:gap-8",children:y.map(x=>m.jsx("div",{className:"mx-auto w-full flex-1",children:m.jsx(se,{budget:x})},x.id))})})]})}ge.__docgenInfo={description:"",methods:[],displayName:"BudgetPage"};export{ge as B};
