import{r as u,g as ne,j as d}from"./iframe-DrftdFVe.js";import{o as re}from"./Pencil.es-rXWp7IS2.js";import{p as se}from"./IconBase.es-CKtGYd8N.js";import{B as ie}from"./BudgetCard-BUO0etck.js";import{B as ue}from"./BudgetModal-DDFMxUy1.js";import{B as oe}from"./Button-BB6CcqhC.js";import{I as ce}from"./IncomeCard-DEjgY3Bo.js";import{I as ee}from"./InputField-rg3VWLdA.js";import{S as le}from"./StatusMessage-CxiOVjEb.js";import{b as de}from"./frequenciesStore-Du5XvsNS.js";const fe=new Map([["bold",u.createElement(u.Fragment,null,u.createElement("path",{d:"M140,32V64a12,12,0,0,1-24,0V32a12,12,0,0,1,24,0Zm33.25,62.75a12,12,0,0,0,8.49-3.52L204.37,68.6a12,12,0,0,0-17-17L164.77,74.26a12,12,0,0,0,8.48,20.49ZM224,116H192a12,12,0,0,0,0,24h32a12,12,0,0,0,0-24Zm-42.26,48.77a12,12,0,1,0-17,17l22.63,22.63a12,12,0,0,0,17-17ZM128,180a12,12,0,0,0-12,12v32a12,12,0,0,0,24,0V192A12,12,0,0,0,128,180ZM74.26,164.77,51.63,187.4a12,12,0,0,0,17,17l22.63-22.63a12,12,0,1,0-17-17ZM76,128a12,12,0,0,0-12-12H32a12,12,0,0,0,0,24H64A12,12,0,0,0,76,128ZM68.6,51.63a12,12,0,1,0-17,17L74.26,91.23a12,12,0,0,0,17-17Z"}))],["duotone",u.createElement(u.Fragment,null,u.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),u.createElement("path",{d:"M136,32V64a8,8,0,0,1-16,0V32a8,8,0,0,1,16,0Zm37.25,58.75a8,8,0,0,0,5.66-2.35l22.63-22.62a8,8,0,0,0-11.32-11.32L167.6,77.09a8,8,0,0,0,5.65,13.66ZM224,120H192a8,8,0,0,0,0,16h32a8,8,0,0,0,0-16Zm-45.09,47.6a8,8,0,0,0-11.31,11.31l22.62,22.63a8,8,0,0,0,11.32-11.32ZM128,184a8,8,0,0,0-8,8v32a8,8,0,0,0,16,0V192A8,8,0,0,0,128,184ZM77.09,167.6,54.46,190.22a8,8,0,0,0,11.32,11.32L88.4,178.91A8,8,0,0,0,77.09,167.6ZM72,128a8,8,0,0,0-8-8H32a8,8,0,0,0,0,16H64A8,8,0,0,0,72,128ZM65.78,54.46A8,8,0,0,0,54.46,65.78L77.09,88.4A8,8,0,0,0,88.4,77.09Z"}))],["fill",u.createElement(u.Fragment,null,u.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm33.94,58.75,17-17a8,8,0,0,1,11.32,11.32l-17,17a8,8,0,0,1-11.31-11.31ZM48,136a8,8,0,0,1,0-16H72a8,8,0,0,1,0,16Zm46.06,37.25-17,17a8,8,0,0,1-11.32-11.32l17-17a8,8,0,0,1,11.31,11.31Zm0-79.19a8,8,0,0,1-11.31,0l-17-17A8,8,0,0,1,77.09,65.77l17,17A8,8,0,0,1,94.06,94.06ZM136,208a8,8,0,0,1-16,0V184a8,8,0,0,1,16,0Zm0-136a8,8,0,0,1-16,0V48a8,8,0,0,1,16,0Zm54.23,118.23a8,8,0,0,1-11.32,0l-17-17a8,8,0,0,1,11.31-11.31l17,17A8,8,0,0,1,190.23,190.23ZM208,136H184a8,8,0,0,1,0-16h24a8,8,0,0,1,0,16Z"}))],["light",u.createElement(u.Fragment,null,u.createElement("path",{d:"M134,32V64a6,6,0,0,1-12,0V32a6,6,0,0,1,12,0Zm39.25,56.75A6,6,0,0,0,177.5,87l22.62-22.63a6,6,0,0,0-8.48-8.48L169,78.5a6,6,0,0,0,4.24,10.25ZM224,122H192a6,6,0,0,0,0,12h32a6,6,0,0,0,0-12Zm-46.5,47A6,6,0,0,0,169,177.5l22.63,22.62a6,6,0,0,0,8.48-8.48ZM128,186a6,6,0,0,0-6,6v32a6,6,0,0,0,12,0V192A6,6,0,0,0,128,186ZM78.5,169,55.88,191.64a6,6,0,1,0,8.48,8.48L87,177.5A6,6,0,1,0,78.5,169ZM70,128a6,6,0,0,0-6-6H32a6,6,0,0,0,0,12H64A6,6,0,0,0,70,128ZM64.36,55.88a6,6,0,0,0-8.48,8.48L78.5,87A6,6,0,1,0,87,78.5Z"}))],["regular",u.createElement(u.Fragment,null,u.createElement("path",{d:"M136,32V64a8,8,0,0,1-16,0V32a8,8,0,0,1,16,0Zm37.25,58.75a8,8,0,0,0,5.66-2.35l22.63-22.62a8,8,0,0,0-11.32-11.32L167.6,77.09a8,8,0,0,0,5.65,13.66ZM224,120H192a8,8,0,0,0,0,16h32a8,8,0,0,0,0-16Zm-45.09,47.6a8,8,0,0,0-11.31,11.31l22.62,22.63a8,8,0,0,0,11.32-11.32ZM128,184a8,8,0,0,0-8,8v32a8,8,0,0,0,16,0V192A8,8,0,0,0,128,184ZM77.09,167.6,54.46,190.22a8,8,0,0,0,11.32,11.32L88.4,178.91A8,8,0,0,0,77.09,167.6ZM72,128a8,8,0,0,0-8-8H32a8,8,0,0,0,0,16H64A8,8,0,0,0,72,128ZM65.78,54.46A8,8,0,0,0,54.46,65.78L77.09,88.4A8,8,0,0,0,88.4,77.09Z"}))],["thin",u.createElement(u.Fragment,null,u.createElement("path",{d:"M132,32V64a4,4,0,0,1-8,0V32a4,4,0,0,1,8,0Zm41.25,54.75a4,4,0,0,0,2.83-1.18L198.71,63a4,4,0,0,0-5.66-5.66L170.43,79.92a4,4,0,0,0,2.82,6.83ZM224,124H192a4,4,0,0,0,0,8h32a4,4,0,0,0,0-8Zm-47.92,46.43a4,4,0,1,0-5.65,5.65l22.62,22.63a4,4,0,0,0,5.66-5.66ZM128,188a4,4,0,0,0-4,4v32a4,4,0,0,0,8,0V192A4,4,0,0,0,128,188ZM79.92,170.43,57.29,193.05A4,4,0,0,0,63,198.71l22.62-22.63a4,4,0,1,0-5.65-5.65ZM68,128a4,4,0,0,0-4-4H32a4,4,0,0,0,0,8H64A4,4,0,0,0,68,128ZM63,57.29A4,4,0,0,0,57.29,63L79.92,85.57a4,4,0,1,0,5.65-5.65Z"}))]]),ae=u.forwardRef((O,b)=>u.createElement(se,{ref:b,...O,weights:fe}));ae.displayName="SpinnerIcon";var z={exports:{}},he=z.exports,te;function me(){return te||(te=1,(function(O,b){(function(A,Z){O.exports=Z()})(he,(function(){var A=1e3,Z=6e4,j=36e5,H="millisecond",p="second",D="minute",S="hour",v="day",y="week",g="month",E="quarter",w="year",Y="date",T="Invalid Date",J=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,R=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(r){var a=["th","st","nd","rd"],e=r%100;return"["+r+(a[(e-20)%10]||a[e]||a[0])+"]"}},B=function(r,a,e){var n=String(r);return!n||n.length>=a?r:""+Array(a+1-n.length).join(e)+r},q={s:B,z:function(r){var a=-r.utcOffset(),e=Math.abs(a),n=Math.floor(e/60),t=e%60;return(a<=0?"+":"-")+B(n,2,"0")+":"+B(t,2,"0")},m:function r(a,e){if(a.date()<e.date())return-r(e,a);var n=12*(e.year()-a.year())+(e.month()-a.month()),t=a.clone().add(n,g),s=e-t<0,i=a.clone().add(n+(s?-1:1),g);return+(-(n+(e-t)/(s?t-i:i-t))||0)},a:function(r){return r<0?Math.ceil(r)||0:Math.floor(r)},p:function(r){return{M:g,y:w,w:y,d:v,D:Y,h:S,m:D,s:p,ms:H,Q:E}[r]||String(r||"").toLowerCase().replace(/s$/,"")},u:function(r){return r===void 0}},N="en",_={};_[N]=m;var K="$isDayjsObject",Q=function(r){return r instanceof W||!(!r||!r[K])},P=function r(a,e,n){var t;if(!a)return N;if(typeof a=="string"){var s=a.toLowerCase();_[s]&&(t=s),e&&(_[s]=e,t=s);var i=a.split("-");if(!t&&i.length>1)return r(i[0])}else{var c=a.name;_[c]=a,t=c}return!n&&t&&(N=t),t||!n&&N},f=function(r,a){if(Q(r))return r.clone();var e=typeof a=="object"?a:{};return e.date=r,e.args=arguments,new W(e)},o=q;o.l=P,o.i=Q,o.w=function(r,a){return f(r,{locale:a.$L,utc:a.$u,x:a.$x,$offset:a.$offset})};var W=(function(){function r(e){this.$L=P(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[K]=!0}var a=r.prototype;return a.parse=function(e){this.$d=(function(n){var t=n.date,s=n.utc;if(t===null)return new Date(NaN);if(o.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var i=t.match(J);if(i){var c=i[2]-1||0,l=(i[7]||"0").substring(0,3);return s?new Date(Date.UTC(i[1],c,i[3]||1,i[4]||0,i[5]||0,i[6]||0,l)):new Date(i[1],c,i[3]||1,i[4]||0,i[5]||0,i[6]||0,l)}}return new Date(t)})(e),this.init()},a.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},a.$utils=function(){return o},a.isValid=function(){return this.$d.toString()!==T},a.isSame=function(e,n){var t=f(e);return this.startOf(n)<=t&&t<=this.endOf(n)},a.isAfter=function(e,n){return f(e)<this.startOf(n)},a.isBefore=function(e,n){return this.endOf(n)<f(e)},a.$g=function(e,n,t){return o.u(e)?this[n]:this.set(t,e)},a.unix=function(){return Math.floor(this.valueOf()/1e3)},a.valueOf=function(){return this.$d.getTime()},a.startOf=function(e,n){var t=this,s=!!o.u(n)||n,i=o.p(e),c=function(V,$){var C=o.w(t.$u?Date.UTC(t.$y,$,V):new Date(t.$y,$,V),t);return s?C:C.endOf(v)},l=function(V,$){return o.w(t.toDate()[V].apply(t.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice($)),t)},h=this.$W,M=this.$M,x=this.$D,k="set"+(this.$u?"UTC":"");switch(i){case w:return s?c(1,0):c(31,11);case g:return s?c(1,M):c(0,M+1);case y:var L=this.$locale().weekStart||0,I=(h<L?h+7:h)-L;return c(s?x-I:x+(6-I),M);case v:case Y:return l(k+"Hours",0);case S:return l(k+"Minutes",1);case D:return l(k+"Seconds",2);case p:return l(k+"Milliseconds",3);default:return this.clone()}},a.endOf=function(e){return this.startOf(e,!1)},a.$set=function(e,n){var t,s=o.p(e),i="set"+(this.$u?"UTC":""),c=(t={},t[v]=i+"Date",t[Y]=i+"Date",t[g]=i+"Month",t[w]=i+"FullYear",t[S]=i+"Hours",t[D]=i+"Minutes",t[p]=i+"Seconds",t[H]=i+"Milliseconds",t)[s],l=s===v?this.$D+(n-this.$W):n;if(s===g||s===w){var h=this.clone().set(Y,1);h.$d[c](l),h.init(),this.$d=h.set(Y,Math.min(this.$D,h.daysInMonth())).$d}else c&&this.$d[c](l);return this.init(),this},a.set=function(e,n){return this.clone().$set(e,n)},a.get=function(e){return this[o.p(e)]()},a.add=function(e,n){var t,s=this;e=Number(e);var i=o.p(n),c=function(M){var x=f(s);return o.w(x.date(x.date()+Math.round(M*e)),s)};if(i===g)return this.set(g,this.$M+e);if(i===w)return this.set(w,this.$y+e);if(i===v)return c(1);if(i===y)return c(7);var l=(t={},t[D]=Z,t[S]=j,t[p]=A,t)[i]||1,h=this.$d.getTime()+e*l;return o.w(h,this)},a.subtract=function(e,n){return this.add(-1*e,n)},a.format=function(e){var n=this,t=this.$locale();if(!this.isValid())return t.invalidDate||T;var s=e||"YYYY-MM-DDTHH:mm:ssZ",i=o.z(this),c=this.$H,l=this.$m,h=this.$M,M=t.weekdays,x=t.months,k=t.meridiem,L=function($,C,F,U){return $&&($[C]||$(n,s))||F[C].slice(0,U)},I=function($){return o.s(c%12||12,$,"0")},V=k||function($,C,F){var U=$<12?"AM":"PM";return F?U.toLowerCase():U};return s.replace(R,(function($,C){return C||(function(F){switch(F){case"YY":return String(n.$y).slice(-2);case"YYYY":return o.s(n.$y,4,"0");case"M":return h+1;case"MM":return o.s(h+1,2,"0");case"MMM":return L(t.monthsShort,h,x,3);case"MMMM":return L(x,h);case"D":return n.$D;case"DD":return o.s(n.$D,2,"0");case"d":return String(n.$W);case"dd":return L(t.weekdaysMin,n.$W,M,2);case"ddd":return L(t.weekdaysShort,n.$W,M,3);case"dddd":return M[n.$W];case"H":return String(c);case"HH":return o.s(c,2,"0");case"h":return I(1);case"hh":return I(2);case"a":return V(c,l,!0);case"A":return V(c,l,!1);case"m":return String(l);case"mm":return o.s(l,2,"0");case"s":return String(n.$s);case"ss":return o.s(n.$s,2,"0");case"SSS":return o.s(n.$ms,3,"0");case"Z":return i}return null})($)||i.replace(":","")}))},a.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},a.diff=function(e,n,t){var s,i=this,c=o.p(n),l=f(e),h=(l.utcOffset()-this.utcOffset())*Z,M=this-l,x=function(){return o.m(i,l)};switch(c){case w:s=x()/12;break;case g:s=x();break;case E:s=x()/3;break;case y:s=(M-h)/6048e5;break;case v:s=(M-h)/864e5;break;case S:s=M/j;break;case D:s=M/Z;break;case p:s=M/A;break;default:s=M}return t?s:o.a(s)},a.daysInMonth=function(){return this.endOf(g).$D},a.$locale=function(){return _[this.$L]},a.locale=function(e,n){if(!e)return this.$L;var t=this.clone(),s=P(e,n,!0);return s&&(t.$L=s),t},a.clone=function(){return o.w(this.$d,this)},a.toDate=function(){return new Date(this.valueOf())},a.toJSON=function(){return this.isValid()?this.toISOString():null},a.toISOString=function(){return this.$d.toISOString()},a.toString=function(){return this.$d.toUTCString()},r})(),X=W.prototype;return f.prototype=X,[["$ms",H],["$s",p],["$m",D],["$H",S],["$W",v],["$M",g],["$y",w],["$D",Y]].forEach((function(r){X[r[1]]=function(a){return this.$g(a,r[0],r[1])}})),f.extend=function(r,a){return r.$i||(r(a,W,f),r.$i=!0),f},f.locale=P,f.isDayjs=Q,f.unix=function(r){return f(1e3*r)},f.en=_[N],f.Ls=_,f.p={},f}))})(z)),z.exports}var Me=me();const G=ne(Me),ge=()=>G().startOf("month").format("YYYY-MM");function $e(){const[O,b]=u.useState(void 0),[A,Z]=u.useState(!1),[j,H]=u.useState(""),[p,D]=u.useState(()=>ge()),{loading:S,fetchBudgets:v,budgets:y}=de();u.useEffect(()=>{const m={},B=G(p,"YYYY-MM").startOf("month").format("YYYY-MM-DD"),q=G(p,"YYYY-MM").endOf("month").format("YYYY-MM-DD");m.from=B,m.to=q,v(m)},[v,p]);const g=u.useMemo(()=>j.trim()?y.filter(m=>m.label.toLowerCase().includes(j.toLowerCase())):y,[y,j]),E=u.useMemo(()=>y?y.flatMap(m=>m.categories??[]).filter(m=>m.type==="INCOME"):[],[y]),w=u.useCallback(m=>{H(m)},[]),Y=u.useCallback(m=>{D(m)},[]),T=u.useCallback(()=>{b(void 0),Z(!0)},[]),J=u.useCallback(m=>{b(m),Z(!0)},[]),R=u.useCallback(()=>{Z(!1),b(void 0)},[]);return{searchValue:j,period:p,filteredBudgets:g,incomeCategories:E,loading:S,handleChange:w,handlePeriodChange:Y,handleCreate:T,handleEdit:J,isEditModalOpen:A,closeModal:R,selectedBudget:O}}function pe(){const{searchValue:O,period:b,filteredBudgets:A,incomeCategories:Z,loading:j,handleChange:H,handlePeriodChange:p,handleCreate:D,handleEdit:S,isEditModalOpen:v,closeModal:y,selectedBudget:g}=$e();return j?d.jsx("div",{className:"flex h-64 items-center justify-center",children:d.jsx("div",{className:"animate-spin",children:d.jsx(ae,{size:32})})}):d.jsxs("div",{className:"flex h-full flex-col gap-4",children:[d.jsx("h1",{className:"text-neutral text-2xl font-bold",children:"Budgets"}),d.jsx("div",{className:"flex justify-end gap-4",children:d.jsx(oe,{onClick:D,icon:re,children:"Nouvelle Budget"})}),d.jsxs("div",{className:"mt-8 flex flex-col gap-y-4 sm:flex-row sm:justify-between sm:gap-y-0",children:[d.jsx("div",{className:"sm:w-1/3",children:d.jsx(ee,{id:"search-budget",label:"",name:"search-budget",placeholder:"Rechercher...",value:O,onChange:H})}),d.jsx(ee,{id:"from-date",label:"Période",type:"month",name:"period-date",value:b,placeholder:"Période",onChange:p})]}),d.jsx("section",{className:"mt-4 flex w-full flex-col gap-4 lg:justify-center",children:d.jsx(ce,{categories:Z})}),d.jsx("section",{className:"flex flex-col gap-4",children:A.length===0?d.jsx(le,{variant:"default",children:"Aucun budget à afficher pour le moment"}):d.jsx("div",{className:"mt-4 grid w-full grid-cols-1 gap-6 lg:grid-cols-2 lg:gap-8",children:A.map(E=>d.jsx("div",{className:"mx-auto w-full flex-1",children:d.jsx(ie,{budget:E,onEditBudget:S})},E.id))})}),v&&d.jsx(ue,{budget:g,onClose:y})]})}pe.__docgenInfo={description:"",methods:[],displayName:"BudgetPage"};export{pe as B};
