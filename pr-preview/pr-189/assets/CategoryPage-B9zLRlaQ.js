import{r as t,j as a}from"./iframe-DrftdFVe.js";import{o as y}from"./Pencil.es-rXWp7IS2.js";import{B as h}from"./Button-BB6CcqhC.js";import{C as b}from"./CategoryModal-D89Z4Z20.js";import{D as j}from"./DataTable-BEMblFef.js";import{A as v}from"./ActionMenu-Dm75IlIp.js";import{D as E}from"./Dot-DpSHsU5-.js";import{u as P}from"./frequenciesStore-Du5XvsNS.js";function I(){const{deleteCategoryById:i,fetchCategories:c,meta:n,categories:d}=P(),[g,o]=t.useState(void 0),[u,l]=t.useState(!1),s=10,[r,C]=t.useState({pageIndex:0,pageSize:s}),f=t.useCallback(()=>{o(void 0),l(!0)},[]),m=t.useCallback(e=>{o(e),l(!0)},[]),x=t.useCallback(()=>{l(!1),o(void 0)},[]);t.useEffect(()=>{c({limit:s,page:r.pageIndex+1})},[c,r.pageIndex]);const p=t.useCallback(e=>[{label:"Éditer",style:"outline",onClick:()=>m(e)},{label:"Supprimer",style:"dangerOutline",onClick:()=>i(e.id)}],[m,i]);return{columns:t.useMemo(()=>[{accessorKey:"label",header:"Nom",cell:({row:e})=>e.original.label},{accessorKey:"color",header:"Couleur",cell:({row:e})=>t.createElement(E,{color:e.original.color||"#F0F0F0"})},{accessorKey:"budgetId",header:"Budget",cell:({row:e})=>e.original.budgetId?e.original.budget?.label:"Coucou mouss"},{accessorKey:"limitAmount",header:"Plafond",cell:({row:e})=>`${e.original.limitAmount} €`},{id:"actions",header:"",cell:({row:e})=>t.createElement(v,{actions:p(e.original)})}],[p]),categories:d,limit:s,page:r,setPage:C,meta:n,handleCreate:f,isEditModalOpen:u,closeModal:x,selectedCategory:g}}const M=()=>{const{columns:i,categories:c,limit:n,page:d,setPage:g,meta:o,handleCreate:u,isEditModalOpen:l,closeModal:s,selectedCategory:r}=I();return a.jsxs("div",{className:"flex h-full flex-col gap-4",children:[a.jsx("h1",{className:"text-neutral text-2xl font-bold",children:"Gestion des catégories"}),a.jsx("div",{className:"flex justify-end gap-4",children:a.jsx(h,{onClick:u,icon:y,children:"Nouvelle Category"})}),a.jsx("div",{className:"overflow-x-auto md:overflow-visible",children:a.jsx(j,{columns:i,data:c,pageSize:n,currentPage:d,setCurrentPage:g,totalPage:o.totalPages,paginated:!0})}),l&&a.jsx(b,{category:r,onClose:s})]})};M.__docgenInfo={description:"",methods:[],displayName:"CategoryPage"};export{M as C};
