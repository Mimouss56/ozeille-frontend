import{r as t,j as a}from"./iframe-slvDrv0y.js";import{o as I}from"./Pencil.es-K0oi5tl9.js";import{B as k}from"./Button-FVET4ZYe.js";import{D as N}from"./DataTable-pMo-l5rj.js";import{T as O}from"./TransactionDeleteModal-BIpJLjc1.js";import{T as P}from"./TransactionModal-XPeQnnIl.js";import{A as v}from"./ActionMenu-JQfxn-Ue.js";import{u as A,a as K}from"./frequenciesStore-Dv50HaPj.js";import{u as $}from"./transactionsStore-geoNjfmh.js";function q(){const[u,s]=t.useState(void 0),[g,n]=t.useState(!1),[m,o]=t.useState(!1),{fetchTransactions:l,meta:r,transactions:p}=$(),{fetchCategories:c,categories:i}=A(),{fetchFrequencies:C,frequencies:T}=K(),d=10,[f,y]=t.useState({pageIndex:0,pageSize:d}),S=t.useCallback(()=>{s(void 0),n(!0)},[]),h=t.useCallback(e=>{s(e),n(!0)},[]),x=t.useCallback(e=>{s(e),o(!0)},[]),E=t.useCallback(()=>{n(!1),o(!1),s(void 0)},[]),M=t.useCallback(e=>[{label:"Éditer",style:"outline",onClick:()=>h(e)},{label:"Supprimer",style:"dangerOutline",onClick:()=>x(e)}],[h,x]),j=t.useMemo(()=>[{accessorKey:"dueAt",header:"Date",cell:({row:e})=>new Date(e.original.dueAt).toLocaleDateString()},{accessorKey:"category",header:"Catégorie",cell:({row:e})=>e.original.categoryId?`${e.original.category?.label}`:"Aucune catégorie"},{accessorKey:"amount",header:"Montant",cell:({row:e})=>{const D=Number(e.original.amount).toFixed(2),b=e.original.category?.type==="INCOME";return t.createElement("span",{className:`font-medium ${b?"text-green-600":"text-red-600"}`},`${b?"+":""} ${D} €`)}},{accessorKey:"label",header:"Libellé"},{id:"actions",header:"",cell:({row:e})=>t.createElement(v,{actions:M(e.original)})}],[M]);return t.useEffect(()=>{i.length===0&&c(),T.length===0&&C()},[i.length,c,C,T.length]),t.useEffect(()=>{l({limit:d,page:f.pageIndex+1})},[l,d,f.pageIndex]),{columns:j,fetchTransactions:l,meta:r,transactions:p,isEditModalOpen:g,isDeleteModalOpen:m,selectedTransaction:u,handleCreate:S,handleEdit:h,handleDelete:x,closeModals:E,page:f,setPage:y,limit:d}}const F=()=>{const{columns:u,meta:s,transactions:g,isEditModalOpen:n,isDeleteModalOpen:m,selectedTransaction:o,handleCreate:l,closeModals:r,page:p,setPage:c,limit:i}=q();return a.jsxs("div",{className:"flex h-full flex-col gap-4",children:[a.jsx("h1",{className:"text-neutral text-2xl font-bold",children:"Transactions"}),a.jsx("div",{className:"flex justify-end gap-4",children:a.jsx(k,{onClick:l,icon:I,children:"Nouvelle Transaction"})}),a.jsx(N,{pageSize:i,data:g,columns:u,currentPage:p,setCurrentPage:c,totalPage:s.totalPages,paginated:!0}),n&&a.jsx(P,{transaction:o,onClose:r}),m&&o&&a.jsx(O,{transaction:o,onClose:r})]})};F.__docgenInfo={description:"",methods:[],displayName:"TransactionPage"};export{F as T};
