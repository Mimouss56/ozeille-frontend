import{a as n,c as s,e as o}from"./axiosClient-D_mxLKba.js";const c=async(r={limit:10,page:1})=>{const{data:e}=await n.get("/categories",{params:r});return e},d=async r=>{const{data:e}=await n.get(`/categories/${r}`);return e},u=async r=>{const{data:e}=await n.post("/categories",r);return e},i=async(r,e)=>{const{data:a}=await n.put(`/categories/${r}`,e);return a},y=async r=>{await n.delete(`/categories/${r}`)},b=s(r=>({categories:[],categoriesOptions:[],currentCategory:null,loading:!1,error:null,meta:{},fetchCategories:async(e={limit:10,page:1})=>{r({loading:!0,error:null});try{const a=await c({...e,page:e.page??1});r({categories:a.data,loading:!1,meta:a.meta})}catch(a){const t=o(a);r({error:t,loading:!1})}},fetchCategoriesOptions:async(e={limit:10,page:1})=>{r({loading:!0,error:null});try{const a=await c({...e,page:e.page??1});r({categoriesOptions:a.data.map(t=>({id:t.id,value:t.id,label:t.label})),loading:!1,meta:a.meta})}catch(a){const t=o(a);r({error:t,loading:!1})}},fetchCategoryById:async e=>{r({loading:!0,error:null});try{const a=await d(e);r({currentCategory:a,loading:!1})}catch(a){const t=o(a);r({error:t,loading:!1})}},createNewCategory:async e=>{r({loading:!0,error:null});try{const a=await u(e);return r(t=>({categories:[...t.categories,a],loading:!1})),a}catch(a){const t=o(a);return r({error:t,loading:!1}),null}},updateCurrentCategory:async(e,a)=>{r({loading:!0,error:null});try{const t=await i(e,a);return r(g=>({categories:g.categories.map(l=>l.id===e?t:l),currentCategory:t,loading:!1})),t}catch(t){const g=o(t);return r({error:g,loading:!1}),null}},deleteCategoryById:async e=>{r({loading:!0,error:null});try{await y(e),r(a=>({categories:a.categories.filter(t=>t.id!==e),loading:!1}))}catch(a){const t=o(a);r({error:t,loading:!1})}},setCurrentCategory:e=>r({currentCategory:e}),clearError:()=>r({error:null})})),f=async r=>{const{data:e}=await n.get("/budgets",{params:r});return e},p=async r=>{const{data:e}=await n.get(`/budgets/${r}`);return e},B=async r=>{const{data:e}=await n.post("/budgets",r);return e},m=async(r,e)=>{const{data:a}=await n.put(`/budgets/${r}`,e);return a},w=async r=>{await n.delete(`/budgets/${r}`)},h=s(r=>({budgets:[],currentBudget:null,loading:!1,error:null,editingBudgetId:null,fetchBudgets:async e=>{r({loading:!0,error:null});try{const a=await f(e);r({budgets:a,loading:!1})}catch(a){const t=o(a);r({error:t,loading:!1,budgets:[]})}},fetchBudgetById:async e=>{r({loading:!0,error:null});try{const a=await p(e);r({currentBudget:a,loading:!1})}catch(a){const t=o(a);r({error:t,loading:!1,budgets:[]})}},createNewBudget:async e=>{r({loading:!0,error:null});try{const a=await B(e);return r(t=>({budgets:[...t.budgets,a],loading:!1})),a}catch(a){const t=o(a);return r({error:t,loading:!1}),null}},updateCurrentBudget:async(e,a)=>{r({loading:!0,error:null});try{const t=await m(e,a);return r(g=>({budgets:g.budgets.map(l=>l.id===e?t:l),currentBudget:t,loading:!1})),t}catch(t){const g=o(t);return r({error:g,loading:!1}),null}},setCurrentBudget:e=>r({currentBudget:e}),deleteBudgetById:async e=>{r({loading:!0,error:null});try{await w(e),r(a=>({budgets:a.budgets.filter(t=>t.id!==e),loading:!1}))}catch(a){const t=o(a);r({error:t,loading:!1})}},openEditBudget:e=>r({editingBudgetId:e}),closeEditBudget:()=>r({editingBudgetId:null})}));export{h as a,b as u};
