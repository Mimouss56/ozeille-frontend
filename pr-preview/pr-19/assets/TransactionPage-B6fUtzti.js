import{r as t,j as a}from"./iframe-ypTtijTa.js";import{o as I}from"./Pencil.es-BUodkboA.js";import{o as k}from"./Wallet.es-DCoRhL74.js";import{B as A}from"./Button-9CDsTel4.js";import{D as N}from"./DataTable-DhgHDVIE.js";import{T as O}from"./TransactionDeleteModal-i3jHuTfZ.js";import{T as P}from"./TransactionModal-BoNg85md.js";import{E as v}from"./EmptyCard-drHVeDWD.js";import{A as $}from"./ActionMenu-CwejJspm.js";import{u as K,a as q}from"./frequenciesStore-B8LYzdyp.js";import{u as F}from"./transactionsStore-BTSZEaTT.js";function z(){const[m,s]=t.useState(void 0),[r,n]=t.useState(!1),[g,o]=t.useState(!1),{fetchTransactions:l,meta:c,transactions:p}=F(),{fetchCategories:i,categories:u}=K(),{fetchFrequencies:C,frequencies:T}=q(),d=10,[f,M]=t.useState({pageIndex:0,pageSize:d}),E=t.useCallback(()=>{s(void 0),n(!0)},[]),h=t.useCallback(e=>{s(e),n(!0)},[]),x=t.useCallback(e=>{s(e),o(!0)},[]),j=t.useCallback(()=>{n(!1),o(!1),s(void 0)},[]),b=t.useCallback(e=>[{label:"Éditer",style:"outline",onClick:()=>h(e)},{label:"Supprimer",style:"dangerOutline",onClick:()=>x(e)}],[h,x]),S=t.useMemo(()=>[{accessorKey:"dueAt",header:"Date",cell:({row:e})=>new Date(e.original.dueAt).toLocaleDateString()},{accessorKey:"category",header:"Catégorie",cell:({row:e})=>e.original.categoryId?`${e.original.category?.label}`:"Aucune catégorie"},{accessorKey:"amount",header:"Montant",cell:({row:e})=>{const D=Number(e.original.amount).toFixed(2),y=e.original.category?.type==="INCOME";return t.createElement("span",{className:`font-medium ${y?"text-green-600":"text-red-600"}`},`${y?"+":""} ${D} €`)}},{accessorKey:"label",header:"Libellé"},{id:"actions",header:"",cell:({row:e})=>t.createElement($,{actions:b(e.original)})}],[b]);return t.useEffect(()=>{u.length===0&&i(),T.length===0&&C()},[u.length,i,C,T.length]),t.useEffect(()=>{l({limit:d,page:f.pageIndex+1})},[l,d,f.pageIndex]),{columns:S,fetchTransactions:l,meta:c,transactions:p,isEditModalOpen:r,isDeleteModalOpen:g,selectedTransaction:m,handleCreate:E,handleEdit:h,handleDelete:x,closeModals:j,page:f,setPage:M,limit:d}}const B=()=>{const{columns:m,meta:s,transactions:r,isEditModalOpen:n,isDeleteModalOpen:g,selectedTransaction:o,handleCreate:l,closeModals:c,page:p,setPage:i,limit:u}=z();return a.jsxs("div",{className:"flex h-full flex-col gap-4",children:[a.jsx("h1",{className:"text-neutral text-2xl font-bold",children:"Transactions"}),a.jsx("div",{className:"flex justify-end gap-4",children:a.jsx(A,{onClick:l,icon:I,children:"Nouvelle Transaction"})}),r.length===0&&a.jsx(v,{icon:k,label:"Aucune transaction",subtitle:"Ajouter une nouvelle transaction"}),a.jsx(N,{pageSize:u,data:r,columns:m,currentPage:p,setCurrentPage:i,totalPage:s.totalPages,paginated:!0}),n&&a.jsx(P,{transaction:o,onClose:c}),g&&o&&a.jsx(O,{transaction:o,onClose:c})]})};B.__docgenInfo={description:"",methods:[],displayName:"TransactionPage"};export{B as T};
