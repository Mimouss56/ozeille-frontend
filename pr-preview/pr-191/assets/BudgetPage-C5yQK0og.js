import{r as u,g as re,j as d}from"./iframe-BgQ_fZKJ.js";import{o as ne}from"./Pencil.es-Be2OFnbh.js";import{p as se}from"./IconBase.es-CZGrfrvE.js";import{B as ie}from"./BudgetCard-UN0E85kX.js";import{B as ue}from"./BudgetModal-BP1hfxuM.js";import{B as oe}from"./Button-BV9cyu97.js";import{I as ce}from"./IncomeCard-C3Aay-hV.js";import{I as ee}from"./InputField-CrXczbqr.js";import{S as le}from"./StatusMessage-CJpt9Zso.js";import{b as de}from"./frequenciesStore-BnM9kRm6.js";const fe=new Map([["bold",u.createElement(u.Fragment,null,u.createElement("path",{d:"M140,32V64a12,12,0,0,1-24,0V32a12,12,0,0,1,24,0Zm33.25,62.75a12,12,0,0,0,8.49-3.52L204.37,68.6a12,12,0,0,0-17-17L164.77,74.26a12,12,0,0,0,8.48,20.49ZM224,116H192a12,12,0,0,0,0,24h32a12,12,0,0,0,0-24Zm-42.26,48.77a12,12,0,1,0-17,17l22.63,22.63a12,12,0,0,0,17-17ZM128,180a12,12,0,0,0-12,12v32a12,12,0,0,0,24,0V192A12,12,0,0,0,128,180ZM74.26,164.77,51.63,187.4a12,12,0,0,0,17,17l22.63-22.63a12,12,0,1,0-17-17ZM76,128a12,12,0,0,0-12-12H32a12,12,0,0,0,0,24H64A12,12,0,0,0,76,128ZM68.6,51.63a12,12,0,1,0-17,17L74.26,91.23a12,12,0,0,0,17-17Z"}))],["duotone",u.createElement(u.Fragment,null,u.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),u.createElement("path",{d:"M136,32V64a8,8,0,0,1-16,0V32a8,8,0,0,1,16,0Zm37.25,58.75a8,8,0,0,0,5.66-2.35l22.63-22.62a8,8,0,0,0-11.32-11.32L167.6,77.09a8,8,0,0,0,5.65,13.66ZM224,120H192a8,8,0,0,0,0,16h32a8,8,0,0,0,0-16Zm-45.09,47.6a8,8,0,0,0-11.31,11.31l22.62,22.63a8,8,0,0,0,11.32-11.32ZM128,184a8,8,0,0,0-8,8v32a8,8,0,0,0,16,0V192A8,8,0,0,0,128,184ZM77.09,167.6,54.46,190.22a8,8,0,0,0,11.32,11.32L88.4,178.91A8,8,0,0,0,77.09,167.6ZM72,128a8,8,0,0,0-8-8H32a8,8,0,0,0,0,16H64A8,8,0,0,0,72,128ZM65.78,54.46A8,8,0,0,0,54.46,65.78L77.09,88.4A8,8,0,0,0,88.4,77.09Z"}))],["fill",u.createElement(u.Fragment,null,u.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm33.94,58.75,17-17a8,8,0,0,1,11.32,11.32l-17,17a8,8,0,0,1-11.31-11.31ZM48,136a8,8,0,0,1,0-16H72a8,8,0,0,1,0,16Zm46.06,37.25-17,17a8,8,0,0,1-11.32-11.32l17-17a8,8,0,0,1,11.31,11.31Zm0-79.19a8,8,0,0,1-11.31,0l-17-17A8,8,0,0,1,77.09,65.77l17,17A8,8,0,0,1,94.06,94.06ZM136,208a8,8,0,0,1-16,0V184a8,8,0,0,1,16,0Zm0-136a8,8,0,0,1-16,0V48a8,8,0,0,1,16,0Zm54.23,118.23a8,8,0,0,1-11.32,0l-17-17a8,8,0,0,1,11.31-11.31l17,17A8,8,0,0,1,190.23,190.23ZM208,136H184a8,8,0,0,1,0-16h24a8,8,0,0,1,0,16Z"}))],["light",u.createElement(u.Fragment,null,u.createElement("path",{d:"M134,32V64a6,6,0,0,1-12,0V32a6,6,0,0,1,12,0Zm39.25,56.75A6,6,0,0,0,177.5,87l22.62-22.63a6,6,0,0,0-8.48-8.48L169,78.5a6,6,0,0,0,4.24,10.25ZM224,122H192a6,6,0,0,0,0,12h32a6,6,0,0,0,0-12Zm-46.5,47A6,6,0,0,0,169,177.5l22.63,22.62a6,6,0,0,0,8.48-8.48ZM128,186a6,6,0,0,0-6,6v32a6,6,0,0,0,12,0V192A6,6,0,0,0,128,186ZM78.5,169,55.88,191.64a6,6,0,1,0,8.48,8.48L87,177.5A6,6,0,1,0,78.5,169ZM70,128a6,6,0,0,0-6-6H32a6,6,0,0,0,0,12H64A6,6,0,0,0,70,128ZM64.36,55.88a6,6,0,0,0-8.48,8.48L78.5,87A6,6,0,1,0,87,78.5Z"}))],["regular",u.createElement(u.Fragment,null,u.createElement("path",{d:"M136,32V64a8,8,0,0,1-16,0V32a8,8,0,0,1,16,0Zm37.25,58.75a8,8,0,0,0,5.66-2.35l22.63-22.62a8,8,0,0,0-11.32-11.32L167.6,77.09a8,8,0,0,0,5.65,13.66ZM224,120H192a8,8,0,0,0,0,16h32a8,8,0,0,0,0-16Zm-45.09,47.6a8,8,0,0,0-11.31,11.31l22.62,22.63a8,8,0,0,0,11.32-11.32ZM128,184a8,8,0,0,0-8,8v32a8,8,0,0,0,16,0V192A8,8,0,0,0,128,184ZM77.09,167.6,54.46,190.22a8,8,0,0,0,11.32,11.32L88.4,178.91A8,8,0,0,0,77.09,167.6ZM72,128a8,8,0,0,0-8-8H32a8,8,0,0,0,0,16H64A8,8,0,0,0,72,128ZM65.78,54.46A8,8,0,0,0,54.46,65.78L77.09,88.4A8,8,0,0,0,88.4,77.09Z"}))],["thin",u.createElement(u.Fragment,null,u.createElement("path",{d:"M132,32V64a4,4,0,0,1-8,0V32a4,4,0,0,1,8,0Zm41.25,54.75a4,4,0,0,0,2.83-1.18L198.71,63a4,4,0,0,0-5.66-5.66L170.43,79.92a4,4,0,0,0,2.82,6.83ZM224,124H192a4,4,0,0,0,0,8h32a4,4,0,0,0,0-8Zm-47.92,46.43a4,4,0,1,0-5.65,5.65l22.62,22.63a4,4,0,0,0,5.66-5.66ZM128,188a4,4,0,0,0-4,4v32a4,4,0,0,0,8,0V192A4,4,0,0,0,128,188ZM79.92,170.43,57.29,193.05A4,4,0,0,0,63,198.71l22.62-22.63a4,4,0,1,0-5.65-5.65ZM68,128a4,4,0,0,0-4-4H32a4,4,0,0,0,0,8H64A4,4,0,0,0,68,128ZM63,57.29A4,4,0,0,0,57.29,63L79.92,85.57a4,4,0,1,0,5.65-5.65Z"}))]]),ae=u.forwardRef((H,A)=>u.createElement(se,{ref:A,...H,weights:fe}));ae.displayName="SpinnerIcon";var J={exports:{}},he=J.exports,te;function me(){return te||(te=1,(function(H,A){(function(Y,Z){H.exports=Z()})(he,(function(){var Y=1e3,Z=6e4,j=36e5,E="millisecond",p="second",D="minute",S="hour",v="day",y="week",g="month",_="quarter",w="year",C="date",P="Invalid Date",R=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,q=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var a=["th","st","nd","rd"],e=n%100;return"["+n+(a[(e-20)%10]||a[e]||a[0])+"]"}},b=function(n,a,e){var r=String(n);return!r||r.length>=a?n:""+Array(a+1-r.length).join(e)+n},N={s:b,z:function(n){var a=-n.utcOffset(),e=Math.abs(a),r=Math.floor(e/60),t=e%60;return(a<=0?"+":"-")+b(r,2,"0")+":"+b(t,2,"0")},m:function n(a,e){if(a.date()<e.date())return-n(e,a);var r=12*(e.year()-a.year())+(e.month()-a.month()),t=a.clone().add(r,g),s=e-t<0,i=a.clone().add(r+(s?-1:1),g);return+(-(r+(e-t)/(s?t-i:i-t))||0)},a:function(n){return n<0?Math.ceil(n)||0:Math.floor(n)},p:function(n){return{M:g,y:w,w:y,d:v,D:C,h:S,m:D,s:p,ms:E,Q:_}[n]||String(n||"").toLowerCase().replace(/s$/,"")},u:function(n){return n===void 0}},L="en",V={};V[L]=f;var K="$isDayjsObject",Q=function(n){return n instanceof U||!(!n||!n[K])},W=function n(a,e,r){var t;if(!a)return L;if(typeof a=="string"){var s=a.toLowerCase();V[s]&&(t=s),e&&(V[s]=e,t=s);var i=a.split("-");if(!t&&i.length>1)return n(i[0])}else{var c=a.name;V[c]=a,t=c}return!r&&t&&(L=t),t||!r&&L},h=function(n,a){if(Q(n))return n.clone();var e=typeof a=="object"?a:{};return e.date=n,e.args=arguments,new U(e)},o=N;o.l=W,o.i=Q,o.w=function(n,a){return h(n,{locale:a.$L,utc:a.$u,x:a.$x,$offset:a.$offset})};var U=(function(){function n(e){this.$L=W(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[K]=!0}var a=n.prototype;return a.parse=function(e){this.$d=(function(r){var t=r.date,s=r.utc;if(t===null)return new Date(NaN);if(o.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var i=t.match(R);if(i){var c=i[2]-1||0,l=(i[7]||"0").substring(0,3);return s?new Date(Date.UTC(i[1],c,i[3]||1,i[4]||0,i[5]||0,i[6]||0,l)):new Date(i[1],c,i[3]||1,i[4]||0,i[5]||0,i[6]||0,l)}}return new Date(t)})(e),this.init()},a.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},a.$utils=function(){return o},a.isValid=function(){return this.$d.toString()!==P},a.isSame=function(e,r){var t=h(e);return this.startOf(r)<=t&&t<=this.endOf(r)},a.isAfter=function(e,r){return h(e)<this.startOf(r)},a.isBefore=function(e,r){return this.endOf(r)<h(e)},a.$g=function(e,r,t){return o.u(e)?this[r]:this.set(t,e)},a.unix=function(){return Math.floor(this.valueOf()/1e3)},a.valueOf=function(){return this.$d.getTime()},a.startOf=function(e,r){var t=this,s=!!o.u(r)||r,i=o.p(e),c=function(k,$){var O=o.w(t.$u?Date.UTC(t.$y,$,k):new Date(t.$y,$,k),t);return s?O:O.endOf(v)},l=function(k,$){return o.w(t.toDate()[k].apply(t.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice($)),t)},m=this.$W,M=this.$M,x=this.$D,I="set"+(this.$u?"UTC":"");switch(i){case w:return s?c(1,0):c(31,11);case g:return s?c(1,M):c(0,M+1);case y:var B=this.$locale().weekStart||0,F=(m<B?m+7:m)-B;return c(s?x-F:x+(6-F),M);case v:case C:return l(I+"Hours",0);case S:return l(I+"Minutes",1);case D:return l(I+"Seconds",2);case p:return l(I+"Milliseconds",3);default:return this.clone()}},a.endOf=function(e){return this.startOf(e,!1)},a.$set=function(e,r){var t,s=o.p(e),i="set"+(this.$u?"UTC":""),c=(t={},t[v]=i+"Date",t[C]=i+"Date",t[g]=i+"Month",t[w]=i+"FullYear",t[S]=i+"Hours",t[D]=i+"Minutes",t[p]=i+"Seconds",t[E]=i+"Milliseconds",t)[s],l=s===v?this.$D+(r-this.$W):r;if(s===g||s===w){var m=this.clone().set(C,1);m.$d[c](l),m.init(),this.$d=m.set(C,Math.min(this.$D,m.daysInMonth())).$d}else c&&this.$d[c](l);return this.init(),this},a.set=function(e,r){return this.clone().$set(e,r)},a.get=function(e){return this[o.p(e)]()},a.add=function(e,r){var t,s=this;e=Number(e);var i=o.p(r),c=function(M){var x=h(s);return o.w(x.date(x.date()+Math.round(M*e)),s)};if(i===g)return this.set(g,this.$M+e);if(i===w)return this.set(w,this.$y+e);if(i===v)return c(1);if(i===y)return c(7);var l=(t={},t[D]=Z,t[S]=j,t[p]=Y,t)[i]||1,m=this.$d.getTime()+e*l;return o.w(m,this)},a.subtract=function(e,r){return this.add(-1*e,r)},a.format=function(e){var r=this,t=this.$locale();if(!this.isValid())return t.invalidDate||P;var s=e||"YYYY-MM-DDTHH:mm:ssZ",i=o.z(this),c=this.$H,l=this.$m,m=this.$M,M=t.weekdays,x=t.months,I=t.meridiem,B=function($,O,T,z){return $&&($[O]||$(r,s))||T[O].slice(0,z)},F=function($){return o.s(c%12||12,$,"0")},k=I||function($,O,T){var z=$<12?"AM":"PM";return T?z.toLowerCase():z};return s.replace(q,(function($,O){return O||(function(T){switch(T){case"YY":return String(r.$y).slice(-2);case"YYYY":return o.s(r.$y,4,"0");case"M":return m+1;case"MM":return o.s(m+1,2,"0");case"MMM":return B(t.monthsShort,m,x,3);case"MMMM":return B(x,m);case"D":return r.$D;case"DD":return o.s(r.$D,2,"0");case"d":return String(r.$W);case"dd":return B(t.weekdaysMin,r.$W,M,2);case"ddd":return B(t.weekdaysShort,r.$W,M,3);case"dddd":return M[r.$W];case"H":return String(c);case"HH":return o.s(c,2,"0");case"h":return F(1);case"hh":return F(2);case"a":return k(c,l,!0);case"A":return k(c,l,!1);case"m":return String(l);case"mm":return o.s(l,2,"0");case"s":return String(r.$s);case"ss":return o.s(r.$s,2,"0");case"SSS":return o.s(r.$ms,3,"0");case"Z":return i}return null})($)||i.replace(":","")}))},a.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},a.diff=function(e,r,t){var s,i=this,c=o.p(r),l=h(e),m=(l.utcOffset()-this.utcOffset())*Z,M=this-l,x=function(){return o.m(i,l)};switch(c){case w:s=x()/12;break;case g:s=x();break;case _:s=x()/3;break;case y:s=(M-m)/6048e5;break;case v:s=(M-m)/864e5;break;case S:s=M/j;break;case D:s=M/Z;break;case p:s=M/Y;break;default:s=M}return t?s:o.a(s)},a.daysInMonth=function(){return this.endOf(g).$D},a.$locale=function(){return V[this.$L]},a.locale=function(e,r){if(!e)return this.$L;var t=this.clone(),s=W(e,r,!0);return s&&(t.$L=s),t},a.clone=function(){return o.w(this.$d,this)},a.toDate=function(){return new Date(this.valueOf())},a.toJSON=function(){return this.isValid()?this.toISOString():null},a.toISOString=function(){return this.$d.toISOString()},a.toString=function(){return this.$d.toUTCString()},n})(),X=U.prototype;return h.prototype=X,[["$ms",E],["$s",p],["$m",D],["$H",S],["$W",v],["$M",g],["$y",w],["$D",C]].forEach((function(n){X[n[1]]=function(a){return this.$g(a,n[0],n[1])}})),h.extend=function(n,a){return n.$i||(n(a,U,h),n.$i=!0),h},h.locale=W,h.isDayjs=Q,h.unix=function(n){return h(1e3*n)},h.en=V[L],h.Ls=V,h.p={},h}))})(J)),J.exports}var Me=me();const G=re(Me),ge=()=>G().startOf("month").format("YYYY-MM");function $e(){const[H,A]=u.useState(void 0),[Y,Z]=u.useState(!1),[j,E]=u.useState(""),[p,D]=u.useState(()=>ge()),{loading:S,fetchBudgets:v,budgets:y}=de();u.useEffect(()=>{const f={},b=G(p,"YYYY-MM").startOf("month").format("YYYY-MM-DD"),N=G(p,"YYYY-MM").endOf("month").format("YYYY-MM-DD");f.from=b,f.to=N,v(f)},[v,p]);const g=u.useMemo(()=>{const f=y.filter(b=>{const N=b.categories??[];return N.length===0?!0:N.some(L=>L.type!=="INCOME")});return j.trim()?f.filter(b=>b.label.toLowerCase().includes(j.toLowerCase())):f},[y,j]),_=u.useMemo(()=>y?y.flatMap(f=>f.categories??[]).filter(f=>f.type==="INCOME"):[],[y]),w=u.useCallback(f=>{E(f)},[]),C=u.useCallback(f=>{D(f)},[]),P=u.useCallback(()=>{A(void 0),Z(!0)},[]),R=u.useCallback(f=>{A(f),Z(!0)},[]),q=u.useCallback(()=>{Z(!1),A(void 0)},[]);return{searchValue:j,period:p,filteredBudgets:g,incomeCategories:_,loading:S,handleChange:w,handlePeriodChange:C,handleCreate:P,handleEdit:R,isEditModalOpen:Y,closeModal:q,selectedBudget:H}}function pe(){const{searchValue:H,period:A,filteredBudgets:Y,incomeCategories:Z,loading:j,handleChange:E,handlePeriodChange:p,handleCreate:D,handleEdit:S,isEditModalOpen:v,closeModal:y,selectedBudget:g}=$e();return j?d.jsx("div",{className:"flex h-64 items-center justify-center",children:d.jsx("div",{className:"animate-spin",children:d.jsx(ae,{size:32})})}):d.jsxs("div",{className:"flex h-full flex-col gap-4",children:[d.jsx("h1",{className:"text-neutral text-2xl font-bold",children:"Budgets"}),d.jsx("div",{className:"flex justify-end gap-4",children:d.jsx(oe,{onClick:D,icon:ne,children:"Nouvelle Budget"})}),d.jsxs("div",{className:"mt-8 flex flex-col gap-y-4 sm:flex-row sm:justify-between sm:gap-y-0",children:[d.jsx("div",{className:"sm:w-1/3",children:d.jsx(ee,{id:"search-budget",label:"",name:"search-budget",placeholder:"Rechercher...",value:H,onChange:E})}),d.jsx(ee,{id:"from-date",label:"Période",type:"month",name:"period-date",value:A,placeholder:"Période",onChange:p})]}),d.jsx("section",{className:"mt-4 flex w-full flex-col gap-4 lg:justify-center",children:d.jsx(ce,{categories:Z})}),d.jsx("section",{className:"flex flex-col gap-4",children:Y.length===0?d.jsx(le,{variant:"default",children:"Aucun budget à afficher pour le moment"}):d.jsx("div",{className:"mt-4 grid w-full grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4 xl:gap-8",children:Y.map(_=>d.jsx("div",{className:"mx-auto w-full flex-1",children:d.jsx(ie,{budget:_,onEditBudget:S})},_.id))})}),v&&d.jsx(ue,{budget:g,onClose:y})]})}pe.__docgenInfo={description:"",methods:[],displayName:"BudgetPage"};export{pe as B};
