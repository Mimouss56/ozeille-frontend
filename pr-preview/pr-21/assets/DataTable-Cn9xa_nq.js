import{r as l,j as n}from"./iframe-z1zinKTN.js";import{u as O,f as k,P as F,g as K,a as A}from"./Pagination-D8sqCLCy.js";import{I as D}from"./InputField-CtrHOFbz.js";import{S as L}from"./Select-D6UU11Tu.js";const E=({data:f,columns:i,paginated:b,pageSize:q=10,totalPage:x,currentPage:g,setCurrentPage:P,isFiltering:c,filterElement:h,resetFiltersSignal:C})=>{const[T,R]=l.useState({pageIndex:0,pageSize:q}),[u,S]=l.useState({}),v=l.useCallback(()=>{S({}),i.forEach(e=>{e.enableFiltering&&e.options?.isServerSide&&e.options.onChange&&e.options.onChange("")})},[i]);l.useEffect(()=>{C!==void 0&&v()},[C,v]);const w=(e,t)=>{S(a=>({...a,[e]:t}))},M=l.useMemo(()=>f.filter(e=>Object.entries(u).every(([t,a])=>{if(!a)return!0;const s=i.find(o=>o.id===t||"accessorKey"in o&&o.accessorKey===t);if(!s||s.options?.isServerSide)return!0;const d=e[t];return d==null?!1:String(d).toLowerCase().includes(a.toLowerCase())})),[f,u,i]),N=l.useMemo(()=>i.map(e=>{if(!e.enableFiltering)return e;const t=e.id||"accessorKey"in e&&String(e.accessorKey)||"",a=e.options?.filterOptions,s=e.options?.filterPlaceholder||"Rechercher...",d=e.options?.filterEmptyLabel||"Toutes",o=e.options?.onChange,j=e.header,p=typeof j=="string"?j:t;return{...e,header:()=>a&&a.length>0?n.jsx(L,{id:`filter-select-${p.toLowerCase().replace(/\s+/g,"-")}`,label:p,value:u[t]||"",onChange:r=>{const m=r?.target!==void 0?r.target.value:String(r);w(t,m),o&&o(m)},options:a.map(r=>({label:r.label,value:r.value})),placeholder:d,size:"xs",style:"neutral"}):n.jsx(D,{id:`filter-input-${p.toLowerCase().replace(/\s+/g,"-")}`,name:`filter-${p}`,label:p,value:u[t]||"",onChange:r=>{const m=r?.target!==void 0?r.target.value:String(r);w(t,m),o&&o(m)},placeholder:s,size:"md",style:"neutral"})}}),[i,u]),y=O({data:M,columns:N,getCoreRowModel:A(),onPaginationChange:P??R,state:{pagination:b?g??T:void 0},...x?{manualPagination:!0,pageCount:x}:{getPaginationRowModel:K()}});return f.length===0?n.jsx("div",{className:"flex h-full items-center justify-center",children:n.jsx("p",{children:"Aucune donnÃ©e"})}):n.jsxs("div",{className:"grid grid-rows-[auto_1fr_auto] gap-4",children:[(c||h)&&n.jsx("div",{className:"flex items-end gap-3",children:h||(c?n.jsx(D,{id:"global-table-filter",name:"global-filter",label:"Recherche",type:"text",placeholder:typeof c=="object"&&c.placeholder?c.placeholder:"Rechercher...",size:"sm",disabled:!0}):null)}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{className:"text-accent",children:y.getHeaderGroups().map(e=>n.jsx("tr",{children:e.headers.map(t=>{const s=t.column.columnDef.currency?"text-right":"";return n.jsx("th",{colSpan:t.colSpan,className:`border-neutral/20 ${s}`,children:k(t.column.columnDef.header,t.getContext())},t.id)})},e.id))}),n.jsx("tbody",{children:y.getRowModel().rows.map(e=>n.jsx("tr",{children:e.getVisibleCells().map(t=>{const s=t.column.columnDef.currency?"text-right":"";return n.jsx("td",{className:`border-neutral/10 ${s}`,children:k(t.column.columnDef.cell,t.getContext())},t.id)})},e.id))})]})}),b&&n.jsx("div",{className:"flex justify-center",children:n.jsx(F,{table:y,currentPage:g?g.pageIndex:T.pageIndex})})]})};E.__docgenInfo={description:"",methods:[],displayName:"DataTable",props:{data:{required:!0,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:""},columns:{required:!0,tsType:{name:"Array",elements:[{name:"intersection",raw:`Omit<TankStackColumnDef<T, unknown>, "accessorKey"> & {
  accessorKey?: keyof T;
  enableFiltering?: boolean;
  options?: FilterableColumnMeta<T>;
  currency?: boolean | CurrencyOptions;
}`,elements:[{name:"Omit",elements:[{name:"TankStackColumnDef",elements:[{name:"T"},{name:"unknown"}],raw:"TankStackColumnDef<T, unknown>"},{name:"literal",value:'"accessorKey"'}],raw:'Omit<TankStackColumnDef<T, unknown>, "accessorKey">'},{name:"signature",type:"object",raw:`{
  accessorKey?: keyof T;
  enableFiltering?: boolean;
  options?: FilterableColumnMeta<T>;
  currency?: boolean | CurrencyOptions;
}`,signature:{properties:[{key:"accessorKey",value:{name:"T",required:!1}},{key:"enableFiltering",value:{name:"boolean",required:!1}},{key:"options",value:{name:"FilterableColumnMeta",elements:[{name:"T"}],raw:"FilterableColumnMeta<T>",required:!1}},{key:"currency",value:{name:"union",raw:"boolean | CurrencyOptions",elements:[{name:"boolean"},{name:"CurrencyOptions"}],required:!1}}]}}]}],raw:"ColumnDef<T>[]"},description:""},paginated:{required:!1,tsType:{name:"boolean"},description:""},pageSize:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"10",computed:!1}},totalPage:{required:!1,tsType:{name:"number"},description:""},currentPage:{required:!1,tsType:{name:"PaginationState"},description:""},setCurrentPage:{required:!1,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"PaginationState"}],raw:"SetStateAction<PaginationState>"}],raw:"Dispatch<SetStateAction<PaginationState>>"},description:""},isFiltering:{required:!1,tsType:{name:"union",raw:"boolean | { placeholder?: string }",elements:[{name:"boolean"},{name:"signature",type:"object",raw:"{ placeholder?: string }",signature:{properties:[{key:"placeholder",value:{name:"string",required:!1}}]}}]},description:""},filterElement:{required:!1,tsType:{name:"ReactNode"},description:""},resetFiltersSignal:{required:!1,tsType:{name:"number"},description:""}}};export{E as D};
