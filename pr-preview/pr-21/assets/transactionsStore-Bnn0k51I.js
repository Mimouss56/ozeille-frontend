import{a as s,c as i,e as o}from"./axiosClient-CUMaPKRu.js";const l=async(a={limit:10,page:1})=>{const{data:r}=await s.get("/transactions",{params:a});return r},d=async a=>{const{data:r}=await s.get(`/transactions/${a}`);return r},u=async a=>{const{data:r}=await s.post("/transactions",a);return r},g=async(a,r)=>{const{data:n}=await s.put(`/transactions/${a}`,r);return n},y=async a=>{await s.delete(`/transactions/${a}`)},m=i(a=>({transactions:[],meta:{},currentTransaction:null,loading:!1,error:null,fetchTransactions:async r=>{a({loading:!0,error:null});try{const n=await l({limit:r?.limit??10,page:r?.page??1,label:r?.label,categoryId:r?.categoryId,"order[dueAt]":r?.["order[dueAt]"]??"desc","exists[pointedAt]":r?.["exists[pointedAt]"]});a({transactions:n.data,meta:n.meta,loading:!1})}catch(n){const t=o(n);a({error:t,loading:!1})}},fetchTransactionById:async r=>{a({loading:!0,error:null});try{const n=await d(r);a({currentTransaction:n,loading:!1})}catch(n){const t=o(n);a({error:t,loading:!1})}},createNewTransaction:async r=>{a({loading:!0,error:null});try{const n=await u(r);return a(t=>({transactions:[...t.transactions,n],loading:!1})),n}catch(n){const t=o(n);return a({error:t,loading:!1}),null}},updateCurrentTransaction:async(r,n)=>{a({loading:!0,error:null});try{const t=await g(r,n);return a(c=>({transactions:c.transactions.map(e=>e.id===r?t:e),currentTransaction:t,loading:!1})),t}catch(t){const c=o(t);return a({error:c,loading:!1}),null}},deleteTransactionById:async r=>{a({loading:!0,error:null});try{await y(r),a(n=>({transactions:n.transactions.filter(t=>t.id!==r),loading:!1}))}catch(n){const t=o(n);a({error:t,loading:!1})}},clearError:()=>a({error:null})}));export{m as u};
