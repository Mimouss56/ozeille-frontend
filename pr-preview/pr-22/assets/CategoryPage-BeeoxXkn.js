import{r as t,j as o}from"./iframe-k3NaWi71.js";import{o as y}from"./Pencil.es-EugNF_sW.js";import{a as h}from"./Tag.es-BS-41mZq.js";import{B as b}from"./Button-3sfTC6nM.js";import{C as j}from"./CategoryModal-BNlBUFK-.js";import{D as v}from"./DataTable-9Fvt9-ve.js";import{E}from"./EmptyCard-BIfEztEy.js";import{A as P}from"./ActionMenu-D6vl8ztT.js";import{D as I}from"./Dot-BHzZvaCT.js";import{u as M}from"./frequenciesStore-uhDM-OuG.js";function S(){const{deleteCategoryById:c,fetchCategories:a,meta:n,categories:d}=M(),[u,l]=t.useState(void 0),[g,s]=t.useState(!1),r=10,[i,C]=t.useState({pageIndex:0,pageSize:r}),f=t.useCallback(()=>{l(void 0),s(!0)},[]),m=t.useCallback(e=>{l(e),s(!0)},[]),x=t.useCallback(()=>{s(!1),l(void 0)},[]);t.useEffect(()=>{a({limit:r,page:i.pageIndex+1})},[a,i.pageIndex]);const p=t.useCallback(e=>[{label:"Éditer",style:"outline",onClick:()=>m(e)},{label:"Supprimer",style:"dangerOutline",onClick:()=>c(e.id)}],[m,c]);return{columns:t.useMemo(()=>[{accessorKey:"label",header:"Nom",cell:({row:e})=>e.original.label},{accessorKey:"color",header:"Couleur",cell:({row:e})=>t.createElement(I,{color:e.original.color||"#F0F0F0"})},{accessorKey:"budgetId",header:"Budget",cell:({row:e})=>e.original.budgetId?e.original.budget?.label:"Coucou mouss"},{accessorKey:"limitAmount",header:"Plafond",cell:({row:e})=>`${e.original.limitAmount} €`},{id:"actions",header:"",cell:({row:e})=>t.createElement(P,{actions:p(e.original)})}],[p]),categories:d,limit:r,page:i,setPage:C,meta:n,handleCreate:f,isEditModalOpen:g,closeModal:x,selectedCategory:u}}const k=()=>{const{columns:c,categories:a,limit:n,page:d,setPage:u,meta:l,handleCreate:g,isEditModalOpen:s,closeModal:r,selectedCategory:i}=S();return o.jsxs("div",{className:"flex h-full flex-col gap-4",children:[o.jsx("h1",{className:"text-neutral text-2xl font-bold",children:"Gestion des catégories"}),o.jsx("div",{className:"flex justify-end gap-4",children:o.jsx(b,{onClick:g,icon:y,children:"Nouvelle Category"})}),a.length===0&&o.jsx(E,{icon:h,label:"Aucune catégorie",subtitle:"Ajouter une nouvelle catégorie"}),o.jsx("div",{className:"overflow-x-auto md:overflow-visible",children:o.jsx(v,{columns:c,data:a,pageSize:n,currentPage:d,setCurrentPage:u,totalPage:l.totalPages,paginated:!0})}),s&&o.jsx(j,{category:i,onClose:r})]})};k.__docgenInfo={description:"",methods:[],displayName:"CategoryPage"};export{k as C};
